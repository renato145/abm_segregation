{"version":3,"sources":["components/Model.tsx","store.ts","components/FloorPlane.tsx","components/BaseCanvas.tsx","components/Slider.tsx","components/Controls.tsx","components/Plots.tsx","components/Description.tsx","App.tsx","reportWebVitals.ts","setup.tsx","../../engine-wasm/pkg/engine_wasm_bg.js"],"names":["ModelType","Model","modelType","props","group","useRef","nodes","useGLTF","ref","dispose","castShadow","receiveShadow","geometry","Body1","material","Head1","ArmLeft1","ArmRight1","LegLeft1","LegRight1","preload","BoardState","FloorPlane","boardSize","tileSize","margin","position","rotation","Math","PI","Array","fill","map","_","i","x","y","floor","args","attach","color","side","DoubleSide","opacity","TICKS_INFO","BOARD_SIZE_DEFAULTS","DENSITY_DEFAULTS","SIMILARITY_DEFAULTS","useStore","create","set","get","ticksPerSecond","setTicksPerSecond","toFixed","setBoardSize","density","setDensity","similarity","setSimilarity","engine","undefined","set_similarity","positions","modelTypes","boardState","Empty","setupEngine","SegregationEngine","get_positions","get_agent_types","Stopped","step","finished","Finished","toogleRun","Running","PlaneConfig","selector","CanvasContent","offset","useFrame","clock","elapsedTime","start","PerspectiveCamera","makeDefault","fov","zoom","intensity","fallback","o","scale","OrbitControls","BaseCanvas","className","shadows","Slider","title","showValue","min","max","defaultValue","onChange","type","target","value","Controls","onClick","disabled","Plots","Description","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","cachedTextDecoder","TextDecoder","module","require","ignoreBOM","fatal","decode","cachegetUint8Memory0","getUint8Memory0","buffer","wasm","Uint8Array","getStringFromWasm0","ptr","len","subarray","heap","push","heap_next","length","addHeapObject","obj","idx","getObject","takeObject","ret","dropObject","handleError","f","apply","this","arguments","e","rows","cols","__wrap","__destroy_into_raw","Object","prototype","__wbindgen_json_parse","arg0","arg1","JSON","parse","__wbg_getRandomValues_57e4008f45f0e105","getRandomValues","__wbg_randomFillSync_d90848a552cbd666","arg2","randomFillSync","__wbg_self_f865985e662246aa","self","__wbindgen_object_drop_ref","__wbg_static_accessor_MODULE_39947eb3fe77895f","__wbg_require_c59851dfa0dc7e78","__wbg_crypto_bfb05100db79193b","crypto","__wbg_msCrypto_f6dddc6ae048b7e2","msCrypto","__wbindgen_is_undefined","__wbg_buffer_ebc6c8e75510eae3","__wbg_length_317f0dd77f7a6673","__wbg_new_135e963dedf67b22","__wbg_set_4a5072a31008e0cb","__wbg_newwithlength_78dc302d31527318","__wbg_subarray_34c228a45c72d146","__wbindgen_throw","Error","__wbindgen_memory"],"mappings":"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","file":"static/js/3.e648b82f.chunk.js","sourcesContent":["/*\nAuto-generated by: https://github.com/pmndrs/gltfjsx\n*/\n\nimport * as THREE from \"three\";\nimport React, { useRef } from \"react\";\nimport { useGLTF } from \"@react-three/drei\";\nimport { GLTF } from \"three/examples/jsm/loaders/GLTFLoader\";\n\ntype GLTFResult = GLTF & {\n  nodes: {\n    Body1: THREE.Mesh;\n    Head1: THREE.Mesh;\n    ArmLeft1: THREE.Mesh;\n    ArmRight1: THREE.Mesh;\n    LegLeft1: THREE.Mesh;\n    LegRight1: THREE.Mesh;\n  };\n  materials: {\n    lambert1: THREE.MeshStandardMaterial;\n  };\n};\n\nexport enum ModelType {\n  Man1 = \"man1.gltf\",\n  Man2 = \"man2.gltf\",\n  // Woman1 = \"woman1.gltf\",\n  // Woman2 = \"woman2.gltf\",\n}\n\ntype Props = { modelType: keyof typeof ModelType } & JSX.IntrinsicElements[\"group\"];\n\nexport const Model = ({ modelType, ...props }: Props) => {\n  const group = useRef<THREE.Group>();\n  const { nodes } = useGLTF(ModelType[modelType]) as GLTFResult;\n\n  return (\n    <group ref={group} {...props} dispose={null} castShadow>\n      <mesh\n        castShadow\n        receiveShadow\n        geometry={nodes.Body1.geometry}\n        material={nodes.Body1.material}\n      />\n      <mesh\n        castShadow\n        receiveShadow\n        geometry={nodes.Head1.geometry}\n        material={nodes.Head1.material}\n      />\n      <mesh\n        castShadow\n        receiveShadow\n        geometry={nodes.ArmLeft1.geometry}\n        material={nodes.ArmLeft1.material}\n      />\n      <mesh\n        castShadow\n        receiveShadow\n        geometry={nodes.ArmRight1.geometry}\n        material={nodes.ArmRight1.material}\n      />\n      <mesh\n        castShadow\n        receiveShadow\n        geometry={nodes.LegLeft1.geometry}\n        material={nodes.LegLeft1.material}\n      />\n      <mesh\n        castShadow\n        receiveShadow\n        geometry={nodes.LegRight1.geometry}\n        material={nodes.LegRight1.material}\n      />\n    </group>\n  );\n};\n\nuseGLTF.preload(\"man1.gltf\");\nuseGLTF.preload(\"man2.gltf\");\n// useGLTF.preload(\"/assets/woman1.gltf\");\n// useGLTF.preload(\"/assets/woman2.gltf\");\n","import create from \"zustand\";\nimport { SegregationEngine } from \"engine-wasm\";\n\nexport enum BoardState {\n  Empty,\n  Stopped,\n  Running,\n  Finished,\n}\n\nexport type TStore = {\n  engine?: SegregationEngine;\n  ticksPerSecond: number;\n  setTicksPerSecond: (x: number) => void;\n  boardSize: number;\n  setBoardSize: (x: number) => void;\n  density: number;\n  setDensity: (x: number) => void;\n  similarity: number;\n  setSimilarity: (x: number) => void;\n  positions: number[][];\n  modelTypes: string[];\n  boardState: BoardState;\n  setupEngine: () => void;\n  step: () => void;\n  toogleRun: () => void;\n};\n\nexport const TICKS_INFO = {\n  min: 0.2, // 5 seconds for 1 tick\n  max: 20, // 20 ticks per second\n  default: 5,\n};\n\nexport const BOARD_SIZE_DEFAULTS = {\n  min: 4,\n  max: 30,\n  default: 15,\n};\n\nexport const DENSITY_DEFAULTS = {\n  min: 0.1,\n  max: 0.99,\n  default: 0.6,\n};\n\nexport const SIMILARITY_DEFAULTS = {\n  min: 0,\n  max: 1,\n  default: 0.3,\n};\n\nexport const useStore = create<TStore>((set, get) => ({\n  ticksPerSecond: TICKS_INFO.default,\n  setTicksPerSecond: (x) => {\n    const ticksPerSecond =\n      x <= TICKS_INFO.max\n        ? +(\n            TICKS_INFO.min +\n            (x / TICKS_INFO.max) * (1 - TICKS_INFO.min)\n          ).toFixed(1)\n        : x - TICKS_INFO.max;\n    set({ ticksPerSecond });\n  },\n  boardSize: BOARD_SIZE_DEFAULTS.default,\n  setBoardSize: (x) => set({ boardSize: x }),\n  density: DENSITY_DEFAULTS.default,\n  setDensity: (x) => set({ density: x }),\n  similarity: SIMILARITY_DEFAULTS.default,\n  setSimilarity: (x) =>\n    set(({ engine }) => {\n      if (engine !== undefined) engine.set_similarity(x);\n      return { similarity: x };\n    }),\n  positions: [],\n  modelTypes: [],\n  boardState: BoardState.Empty,\n  setupEngine: () => {\n    set(({ boardSize, density, similarity }) => {\n      const engine = new SegregationEngine(\n        boardSize,\n        boardSize,\n        density,\n        similarity\n      );\n      const positions = engine.get_positions();\n      const modelTypes = engine.get_agent_types();\n      return {\n        engine,\n        positions,\n        modelTypes,\n        boardState: BoardState.Stopped,\n      };\n    });\n  },\n  step: () => {\n    const engine = get().engine;\n    if (engine === undefined) return;\n    const finished = engine.step();\n    set(({ boardState }) => ({\n      positions: engine.get_positions(),\n      boardState: finished ? BoardState.Finished : boardState,\n    }));\n  },\n  toogleRun: () =>\n    set(({ boardState }) => ({\n      boardState:\n        boardState === BoardState.Stopped\n          ? BoardState.Running\n          : boardState === BoardState.Running\n          ? BoardState.Stopped\n          : boardState,\n    })),\n}));\n","import { Plane } from \"@react-three/drei\";\nimport React from \"react\";\nimport { DoubleSide } from \"three\";\n\ninterface Props {\n  boardSize: number;\n  tileSize: number;\n  margin: number;\n}\n\nexport const FloorPlane: React.FC<Props> = ({\n  boardSize,\n  tileSize,\n  margin,\n}) => {\n  return (\n    <mesh receiveShadow position={[0, -0.01, 0]} rotation={[Math.PI / 2, 0, 0]}>\n      {Array(boardSize * boardSize)\n        .fill(0)\n        .map((_, i) => {\n          const x = (i % boardSize) * tileSize;\n          const y = Math.floor(i / boardSize) * tileSize;\n          return (\n            <group key={i}>\n              <Plane\n                receiveShadow\n                args={[tileSize - margin, tileSize - margin]}\n                position={[x, y, 0]}\n              >\n                <meshBasicMaterial\n                  attach=\"material\"\n                  color=\"#55565e\"\n                  side={DoubleSide}\n                  opacity={0.5}\n                />\n              </Plane>\n              <Plane\n                receiveShadow\n                args={[tileSize - margin, tileSize - margin]}\n                position={[x, y, 0]}\n              >\n                <shadowMaterial\n                  attach=\"material\"\n                  color=\"#000\"\n                  side={DoubleSide}\n                  opacity={0.5}\n                />\n              </Plane>\n            </group>\n          );\n        })}\n    </mesh>\n  );\n};\n","import React, { Suspense } from \"react\";\nimport { Canvas, useFrame } from \"@react-three/fiber\";\nimport { OrbitControls, PerspectiveCamera } from \"@react-three/drei\";\nimport { Model } from \"./Model\";\nimport { FloorPlane } from \"./FloorPlane\";\nimport { BoardState, TStore, useStore } from \"../store\";\n\ninterface Props {\n  className: string;\n}\n\nconst PlaneConfig = {\n  tileSize: 3,\n  margin: 0.1,\n};\n\nconst selector = ({\n  boardSize,\n  positions,\n  modelTypes,\n  boardState,\n  ticksPerSecond,\n  step,\n}: TStore) => ({\n  boardSize,\n  positions,\n  modelTypes,\n  boardState,\n  ticksPerSecond,\n  step,\n});\n\nconst CanvasContent: React.FC = () => {\n  const {\n    boardSize,\n    positions,\n    modelTypes,\n    boardState,\n    ticksPerSecond,\n    step,\n  } = useStore(selector);\n  // const ref = useRef();\n  // useHelper(ref, PointLightHelper, 2, \"yellow\");\n  const offset = ((boardSize - 1) * PlaneConfig.tileSize) / 2;\n\n  // useFrame(({ clock: { elapsedTime } }) => {\n  useFrame(({ clock }) => {\n    if (\n      boardState === BoardState.Running &&\n      clock.elapsedTime > 1 / ticksPerSecond\n    ) {\n      step();\n      clock.start();\n    }\n  });\n\n  return (\n    <>\n      <PerspectiveCamera\n        makeDefault\n        position={[10, 40, 70]}\n        fov={50}\n        zoom={1.0}\n      />\n      <ambientLight intensity={0.2} />\n      <pointLight\n        // ref={ref}\n        castShadow\n        position={[5, 30, 35]}\n        intensity={0.5}\n      />\n\n      <Suspense fallback={null}>\n        <group position={[-offset, 0, -offset]}>\n          <FloorPlane boardSize={boardSize} {...PlaneConfig} />\n          {positions.map((o, i) => (\n            <Model\n              key={i}\n              scale={0.25}\n              modelType={modelTypes[i] as any}\n              position={[\n                o[0] * PlaneConfig.tileSize,\n                0,\n                o[1] * PlaneConfig.tileSize,\n              ]}\n            />\n          ))}\n        </group>\n      </Suspense>\n      <OrbitControls />\n    </>\n  );\n};\n\nexport const BaseCanvas: React.FC<Props> = ({ className }) => {\n  return (\n    <Canvas className={className} shadows>\n      <CanvasContent />\n    </Canvas>\n  );\n};\n","import React from \"react\";\n\ninterface Props {\n  title?: string;\n  showValue?: number;\n  className?: string;\n  min?: number;\n  max?: number;\n  step?: number;\n  defaultValue?: number;\n  onChange?: (value: number) => void;\n}\n\nexport const Slider: React.FC<Props> = ({\n  title,\n  showValue,\n  className,\n  min = 1,\n  max = 100,\n  step = 1,\n  defaultValue = 50,\n  onChange = () => {},\n}) => {\n  return (\n    <div className={className}>\n      <div className=\"group p-2 pb-3 flex flex-col bg-gray-400 bg-opacity-60 border-2 border-opacity-25 hover:border-opacity-30 border-gray-400 shadow rounded\">\n        {title !== undefined ? (\n          <p className=\"text-sm font-bold text-gray-700 group-hover:text-gray-900\">\n            {title}{\" \"}\n            {showValue !== undefined ? (\n              <span className=\"opacity-0 group-hover:opacity-100\">\n                ({showValue})\n              </span>\n            ) : null}\n          </p>\n        ) : null}\n        <input\n          className=\"mt-2.5 slider appearance-none outline-none w-full h-1.5 hover:bg-green-50 focus:ring ring-green-600 ring-opacity-50 rounded-full shadow-md\"\n          type=\"range\"\n          min={min}\n          max={max}\n          step={step}\n          defaultValue={defaultValue}\n          onChange={({ target }) => onChange(+target.value)}\n        />\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport {\n  BoardState,\n  BOARD_SIZE_DEFAULTS,\n  DENSITY_DEFAULTS,\n  SIMILARITY_DEFAULTS,\n  TICKS_INFO,\n  TStore,\n  useStore,\n} from \"../store\";\nimport { Slider } from \"./Slider\";\n\ninterface Props {\n  className: string;\n}\n\nconst selector = ({\n  setupEngine,\n  step,\n  ticksPerSecond,\n  setTicksPerSecond,\n  boardSize,\n  setBoardSize,\n  density,\n  setDensity,\n  similarity,\n  setSimilarity,\n  boardState,\n  toogleRun,\n}: TStore) => ({\n  setupEngine,\n  step,\n  ticksPerSecond,\n  setTicksPerSecond,\n  boardSize,\n  setBoardSize,\n  density,\n  setDensity,\n  similarity,\n  setSimilarity,\n  boardState,\n  toogleRun,\n});\n\nexport const Controls: React.FC<Props> = ({ className }) => {\n  const {\n    setupEngine,\n    step,\n    ticksPerSecond,\n    setTicksPerSecond,\n    boardSize,\n    setBoardSize,\n    density,\n    setDensity,\n    similarity,\n    setSimilarity,\n    boardState,\n    toogleRun,\n  } = useStore(selector);\n\n  return (\n    <div className={className}>\n      <div className=\"flex flex-wrap space-x-2 justify-between\">\n        <button className=\"flex-1 btn\" onClick={setupEngine}>\n          Setup\n        </button>\n        <button\n          className=\"flex-1 btn\"\n          onClick={step}\n          disabled={boardState !== BoardState.Stopped}\n        >\n          1-step\n        </button>\n        <button\n          className={`flex-1 btn ${\n            boardState === BoardState.Running\n              ? \"bg-green-600 hover:bg-red-700\"\n              : \"\"\n          } ${\n            boardState === BoardState.Finished\n              ? \"disabled:opacity-100 disabled:bg-green-600\"\n              : \"\"\n          }`}\n          onClick={toogleRun}\n          disabled={\n            boardState === BoardState.Empty ||\n            boardState === BoardState.Finished\n          }\n        >\n          {boardState === BoardState.Finished\n            ? \"Finished!\"\n            : boardState === BoardState.Running\n            ? \"Stop\"\n            : \"Run\"}\n        </button>\n      </div>\n      <div className=\"mt-4 grid grid-cols-1 xl:grid-cols-2 gap-2\">\n        <Slider\n          title=\"Ticks per second\"\n          min={0}\n          max={TICKS_INFO.max * 2}\n          defaultValue={TICKS_INFO.max + TICKS_INFO.default}\n          showValue={ticksPerSecond}\n          onChange={setTicksPerSecond}\n        />\n        <Slider\n          title=\"Board size\"\n          min={BOARD_SIZE_DEFAULTS.min}\n          max={BOARD_SIZE_DEFAULTS.max}\n          defaultValue={boardSize}\n          showValue={boardSize}\n          onChange={setBoardSize}\n        />\n        <Slider\n          title=\"Density\"\n          min={DENSITY_DEFAULTS.min}\n          max={DENSITY_DEFAULTS.max}\n          step={0.01}\n          defaultValue={density}\n          showValue={density}\n          onChange={setDensity}\n        />\n        <Slider\n          title=\"Similarity wanted\"\n          min={SIMILARITY_DEFAULTS.min}\n          max={SIMILARITY_DEFAULTS.max}\n          step={0.01}\n          defaultValue={similarity}\n          showValue={similarity}\n          onChange={setSimilarity}\n        />\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\n\ninterface Props {\n  className?: string\n}\n\nexport const Plots: React.FC<Props> = ({className}) => {\n  return (\n    <div className={className}>\n      TODO: Plots\n    </div>\n  );\n};","import React from \"react\";\nimport { Controls } from \"./Controls\";\nimport { Plots } from \"./Plots\";\n\ninterface Props {\n  className: string;\n}\n\nexport const Description: React.FC<Props> = ({ className }) => {\n  return (\n    <div className={className}>\n      <div className=\"flex flex-col px-2 lg:px-4 pt-2 lg:pt-3\">\n        <p className=\"text-2xl xl:text-3xl font-bold\">Segregation Model</p>\n        <p className=\"mt-4 text-sm xl:text-base text-justify\">\n          TODO: Some description{\" \"}\n          {/* This project models the behavior of two types of agents in a\n          neighborhood. The orange agents and blue agents get along with one\n          another. But each agent wants to make sure that it lives near some of\n          \"its own.\" That is, each orange agent wants to live near at least some\n          orange agents, and each blue agent wants to live near at least some\n          blue agents. The simulation shows how these individual preferences\n          ripple through the neighborhood, leading to large-scale patterns. */}\n          {/* <a\n            className=\"font-bold\"\n            href=\"http://ccl.northwestern.edu/netlogo/models/Segregation\"\n            target=\"_black\"\n            rel=\"noopener\"\n          >\n            Wilensky, U. (1997). NetLogo Segregation model\n          </a> */}\n        </p>\n        <Controls className=\"mt-4\" />\n        <Plots className=\"mt-4\" />\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { BaseCanvas } from \"./components/BaseCanvas\";\nimport { Description } from \"./components/Description\";\n\nexport const App = () => {\n  return (\n    <div className=\"h-screen w-screen p-4\">\n      <div className=\"flex h-full\">\n        <Description className=\"w-1/4 xl:w-1/3 bg-gray-200 rounded-lg\" />\n        <BaseCanvas className=\"ml-2 flex-1 bg-gray-900\" />\n      </div>\n    </div>\n  );\n};\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport { App } from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import * as wasm from './engine_wasm_bg.wasm';\n\nconst lTextDecoder = typeof TextDecoder === 'undefined' ? (0, module.require)('util').TextDecoder : TextDecoder;\n\nlet cachedTextDecoder = new lTextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n\ncachedTextDecoder.decode();\n\nlet cachegetUint8Memory0 = null;\nfunction getUint8Memory0() {\n    if (cachegetUint8Memory0 === null || cachegetUint8Memory0.buffer !== wasm.memory.buffer) {\n        cachegetUint8Memory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachegetUint8Memory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nconst heap = new Array(32).fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nlet heap_next = heap.length;\n\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n\n    heap[idx] = obj;\n    return idx;\n}\n\nfunction getObject(idx) { return heap[idx]; }\n\nfunction dropObject(idx) {\n    if (idx < 36) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\n\nfunction takeObject(idx) {\n    const ret = getObject(idx);\n    dropObject(idx);\n    return ret;\n}\n\nfunction handleError(f) {\n    return function () {\n        try {\n            return f.apply(this, arguments);\n\n        } catch (e) {\n            wasm.__wbindgen_exn_store(addHeapObject(e));\n        }\n    };\n}\n\nfunction getArrayU8FromWasm0(ptr, len) {\n    return getUint8Memory0().subarray(ptr / 1, ptr / 1 + len);\n}\n/**\n*/\nexport class SegregationEngine {\n\n    static __wrap(ptr) {\n        const obj = Object.create(SegregationEngine.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_segregationengine_free(ptr);\n    }\n    /**\n    * @param {number} rows\n    * @param {number} cols\n    * @param {number} density\n    * @param {number} similarity\n    */\n    constructor(rows, cols, density, similarity) {\n        var ret = wasm.segregationengine_new(rows, cols, density, similarity);\n        return SegregationEngine.__wrap(ret);\n    }\n    /**\n    * @returns {any}\n    */\n    get_positions() {\n        var ret = wasm.segregationengine_get_positions(this.ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @returns {any}\n    */\n    get_agent_types() {\n        var ret = wasm.segregationengine_get_agent_types(this.ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @returns {boolean}\n    */\n    step() {\n        var ret = wasm.segregationengine_step(this.ptr);\n        return ret !== 0;\n    }\n    /**\n    * @param {number} similarity\n    */\n    set_similarity(similarity) {\n        wasm.segregationengine_set_similarity(this.ptr, similarity);\n    }\n}\n\nexport const __wbindgen_json_parse = function(arg0, arg1) {\n    var ret = JSON.parse(getStringFromWasm0(arg0, arg1));\n    return addHeapObject(ret);\n};\n\nexport const __wbg_getRandomValues_57e4008f45f0e105 = handleError(function(arg0, arg1) {\n    getObject(arg0).getRandomValues(getObject(arg1));\n});\n\nexport const __wbg_randomFillSync_d90848a552cbd666 = handleError(function(arg0, arg1, arg2) {\n    getObject(arg0).randomFillSync(getArrayU8FromWasm0(arg1, arg2));\n});\n\nexport const __wbg_self_f865985e662246aa = handleError(function() {\n    var ret = self.self;\n    return addHeapObject(ret);\n});\n\nexport const __wbindgen_object_drop_ref = function(arg0) {\n    takeObject(arg0);\n};\n\nexport const __wbg_static_accessor_MODULE_39947eb3fe77895f = function() {\n    var ret = module;\n    return addHeapObject(ret);\n};\n\nexport const __wbg_require_c59851dfa0dc7e78 = handleError(function(arg0, arg1, arg2) {\n    var ret = getObject(arg0).require(getStringFromWasm0(arg1, arg2));\n    return addHeapObject(ret);\n});\n\nexport const __wbg_crypto_bfb05100db79193b = function(arg0) {\n    var ret = getObject(arg0).crypto;\n    return addHeapObject(ret);\n};\n\nexport const __wbg_msCrypto_f6dddc6ae048b7e2 = function(arg0) {\n    var ret = getObject(arg0).msCrypto;\n    return addHeapObject(ret);\n};\n\nexport const __wbindgen_is_undefined = function(arg0) {\n    var ret = getObject(arg0) === undefined;\n    return ret;\n};\n\nexport const __wbg_buffer_ebc6c8e75510eae3 = function(arg0) {\n    var ret = getObject(arg0).buffer;\n    return addHeapObject(ret);\n};\n\nexport const __wbg_length_317f0dd77f7a6673 = function(arg0) {\n    var ret = getObject(arg0).length;\n    return ret;\n};\n\nexport const __wbg_new_135e963dedf67b22 = function(arg0) {\n    var ret = new Uint8Array(getObject(arg0));\n    return addHeapObject(ret);\n};\n\nexport const __wbg_set_4a5072a31008e0cb = function(arg0, arg1, arg2) {\n    getObject(arg0).set(getObject(arg1), arg2 >>> 0);\n};\n\nexport const __wbg_newwithlength_78dc302d31527318 = function(arg0) {\n    var ret = new Uint8Array(arg0 >>> 0);\n    return addHeapObject(ret);\n};\n\nexport const __wbg_subarray_34c228a45c72d146 = function(arg0, arg1, arg2) {\n    var ret = getObject(arg0).subarray(arg1 >>> 0, arg2 >>> 0);\n    return addHeapObject(ret);\n};\n\nexport const __wbindgen_throw = function(arg0, arg1) {\n    throw new Error(getStringFromWasm0(arg0, arg1));\n};\n\nexport const __wbindgen_memory = function() {\n    var ret = wasm.memory;\n    return addHeapObject(ret);\n};\n\n"],"sourceRoot":""}