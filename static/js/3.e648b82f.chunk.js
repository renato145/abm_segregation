(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[3],{1:function(e,t,n){"use strict";n.r(t);var r,i=n(2),a=n.n(i),o=n(36),s=n.n(o),c=(n(39),n(13)),u=n(10),d=n(58),l=n(57),f=n(21),m=n(56),p=n(4);!function(e){e.Man1="man1.gltf",e.Man2="man2.gltf"}(r||(r={}));var b=function(e){var t=e.modelType,n=Object(f.a)(e,["modelType"]),a=Object(i.useRef)(),o=Object(m.a)(r[t]).nodes;return Object(p.jsxs)("group",Object(c.a)(Object(c.a)({ref:a},n),{},{dispose:null,castShadow:!0,children:[Object(p.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:o.Body1.geometry,material:o.Body1.material}),Object(p.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:o.Head1.geometry,material:o.Head1.material}),Object(p.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:o.ArmLeft1.geometry,material:o.ArmLeft1.material}),Object(p.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:o.ArmRight1.geometry,material:o.ArmRight1.material}),Object(p.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:o.LegLeft1.geometry,material:o.LegLeft1.material}),Object(p.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:o.LegRight1.geometry,material:o.LegRight1.material})]}))};m.a.preload("man1.gltf"),m.a.preload("man2.gltf");var j,h=n(54),g=n(5),y=function(e){var t=e.boardSize,n=e.tileSize,r=e.margin;return Object(p.jsx)("mesh",{receiveShadow:!0,position:[0,-.01,0],rotation:[Math.PI/2,0,0],children:Array(t*t).fill(0).map((function(e,i){var a=i%t*n,o=Math.floor(i/t)*n;return Object(p.jsxs)("group",{children:[Object(p.jsx)(h.a,{receiveShadow:!0,args:[n-r,n-r],position:[a,o,0],children:Object(p.jsx)("meshBasicMaterial",{attach:"material",color:"#55565e",side:g.DoubleSide,opacity:.5})}),Object(p.jsx)(h.a,{receiveShadow:!0,args:[n-r,n-r],position:[a,o,0],children:Object(p.jsx)("shadowMaterial",{attach:"material",color:"#000",side:g.DoubleSide,opacity:.5})})]},i)}))})},x=n(32),S=n(3);!function(e){e[e.Empty=0]="Empty",e[e.Stopped=1]="Stopped",e[e.Running=2]="Running",e[e.Finished=3]="Finished"}(j||(j={}));var v=.2,O=20,w=5,k=4,N=30,z=15,T=.1,_=.99,R=.6,P=0,D=1,F=.3,C=Object(x.a)((function(e,t){return{ticksPerSecond:w,setTicksPerSecond:function(t){var n=t<=O?+(v+t/O*(1-v)).toFixed(1):t-O;e({ticksPerSecond:n})},boardSize:z,setBoardSize:function(t){return e({boardSize:t})},density:R,setDensity:function(t){return e({density:t})},similarity:F,setSimilarity:function(t){return e((function(e){var n=e.engine;return void 0!==n&&n.set_similarity(t),{similarity:t}}))},positions:[],modelTypes:[],boardState:j.Empty,setupEngine:function(){e((function(e){var t=e.boardSize,n=e.density,r=e.similarity,i=new S.a(t,t,n,r),a=i.get_positions(),o=i.get_agent_types();return{engine:i,positions:a,modelTypes:o,boardState:j.Stopped}}))},step:function(){var n=t().engine;if(void 0!==n){var r=n.step();e((function(e){var t=e.boardState;return{positions:n.get_positions(),boardState:r?j.Finished:t}}))}},toogleRun:function(){return e((function(e){var t=e.boardState;return{boardState:t===j.Stopped?j.Running:t===j.Running?j.Stopped:t}}))}}})),L={tileSize:3,margin:.1},V=function(e){return{boardSize:e.boardSize,positions:e.positions,modelTypes:e.modelTypes,boardState:e.boardState,ticksPerSecond:e.ticksPerSecond,step:e.step}},B=function(){var e=C(V),t=e.boardSize,n=e.positions,r=e.modelTypes,a=e.boardState,o=e.ticksPerSecond,s=e.step,f=(t-1)*L.tileSize/2;return Object(u.b)((function(e){var t=e.clock;a===j.Running&&t.elapsedTime>1/o&&(s(),t.start())})),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(d.a,{makeDefault:!0,position:[10,40,70],fov:50,zoom:1}),Object(p.jsx)("ambientLight",{intensity:.2}),Object(p.jsx)("pointLight",{castShadow:!0,position:[5,30,35],intensity:.5}),Object(p.jsx)(i.Suspense,{fallback:null,children:Object(p.jsxs)("group",{position:[-f,0,-f],children:[Object(p.jsx)(y,Object(c.a)({boardSize:t},L)),n.map((function(e,t){return Object(p.jsx)(b,{scale:.25,modelType:r[t],position:[e[0]*L.tileSize,0,e[1]*L.tileSize]},t)}))]})}),Object(p.jsx)(l.a,{})]})},E=function(e){var t=e.className;return Object(p.jsx)(u.a,{className:t,shadows:!0,children:Object(p.jsx)(B,{})})},A=function(e){var t=e.title,n=e.showValue,r=e.className,i=e.min,a=void 0===i?1:i,o=e.max,s=void 0===o?100:o,c=e.step,u=void 0===c?1:c,d=e.defaultValue,l=void 0===d?50:d,f=e.onChange,m=void 0===f?function(){}:f;return Object(p.jsx)("div",{className:r,children:Object(p.jsxs)("div",{className:"group p-2 pb-3 flex flex-col bg-gray-400 bg-opacity-60 border-2 border-opacity-25 hover:border-opacity-30 border-gray-400 shadow rounded",children:[void 0!==t?Object(p.jsxs)("p",{className:"text-sm font-bold text-gray-700 group-hover:text-gray-900",children:[t," ",void 0!==n?Object(p.jsxs)("span",{className:"opacity-0 group-hover:opacity-100",children:["(",n,")"]}):null]}):null,Object(p.jsx)("input",{className:"mt-2.5 slider appearance-none outline-none w-full h-1.5 hover:bg-green-50 focus:ring ring-green-600 ring-opacity-50 rounded-full shadow-md",type:"range",min:a,max:s,step:u,defaultValue:l,onChange:function(e){var t=e.target;return m(+t.value)}})]})})},M=function(e){return{setupEngine:e.setupEngine,step:e.step,ticksPerSecond:e.ticksPerSecond,setTicksPerSecond:e.setTicksPerSecond,boardSize:e.boardSize,setBoardSize:e.setBoardSize,density:e.density,setDensity:e.setDensity,similarity:e.similarity,setSimilarity:e.setSimilarity,boardState:e.boardState,toogleRun:e.toogleRun}},q=function(e){var t=e.className,n=C(M),r=n.setupEngine,i=n.step,a=n.ticksPerSecond,o=n.setTicksPerSecond,s=n.boardSize,c=n.setBoardSize,u=n.density,d=n.setDensity,l=n.similarity,f=n.setSimilarity,m=n.boardState,b=n.toogleRun;return Object(p.jsxs)("div",{className:t,children:[Object(p.jsxs)("div",{className:"flex flex-wrap space-x-2 justify-between",children:[Object(p.jsx)("button",{className:"flex-1 btn",onClick:r,children:"Setup"}),Object(p.jsx)("button",{className:"flex-1 btn",onClick:i,disabled:m!==j.Stopped,children:"1-step"}),Object(p.jsx)("button",{className:"flex-1 btn ".concat(m===j.Running?"bg-green-600 hover:bg-red-700":""," ").concat(m===j.Finished?"disabled:opacity-100 disabled:bg-green-600":""),onClick:b,disabled:m===j.Empty||m===j.Finished,children:m===j.Finished?"Finished!":m===j.Running?"Stop":"Run"})]}),Object(p.jsxs)("div",{className:"mt-4 grid grid-cols-1 xl:grid-cols-2 gap-2",children:[Object(p.jsx)(A,{title:"Ticks per second",min:0,max:2*O,defaultValue:O+w,showValue:a,onChange:o}),Object(p.jsx)(A,{title:"Board size",min:k,max:N,defaultValue:s,showValue:s,onChange:c}),Object(p.jsx)(A,{title:"Density",min:T,max:_,step:.01,defaultValue:u,showValue:u,onChange:d}),Object(p.jsx)(A,{title:"Similarity wanted",min:P,max:D,step:.01,defaultValue:l,showValue:l,onChange:f})]})]})},I=function(e){var t=e.className;return Object(p.jsx)("div",{className:t,children:"TODO: Plots"})},J=function(e){var t=e.className;return Object(p.jsx)("div",{className:t,children:Object(p.jsxs)("div",{className:"flex flex-col px-2 lg:px-4 pt-2 lg:pt-3",children:[Object(p.jsx)("p",{className:"text-2xl xl:text-3xl font-bold",children:"Segregation Model"}),Object(p.jsxs)("p",{className:"mt-4 text-sm xl:text-base text-justify",children:["TODO: Some description"," "]}),Object(p.jsx)(q,{className:"mt-4"}),Object(p.jsx)(I,{className:"mt-4"})]})})},U=function(){return Object(p.jsx)("div",{className:"h-screen w-screen p-4",children:Object(p.jsxs)("div",{className:"flex h-full",children:[Object(p.jsx)(J,{className:"w-1/4 xl:w-1/3 bg-gray-200 rounded-lg"}),Object(p.jsx)(E,{className:"ml-2 flex-1 bg-gray-900"})]})})},H=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,55)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};s.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(U,{})}),document.getElementById("root")),H()},3:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return j})),n.d(t,"p",(function(){return h})),n.d(t,"d",(function(){return g})),n.d(t,"i",(function(){return y})),n.d(t,"k",(function(){return x})),n.d(t,"r",(function(){return S})),n.d(t,"m",(function(){return v})),n.d(t,"j",(function(){return O})),n.d(t,"c",(function(){return w})),n.d(t,"f",(function(){return k})),n.d(t,"o",(function(){return N})),n.d(t,"b",(function(){return z})),n.d(t,"e",(function(){return T})),n.d(t,"g",(function(){return _})),n.d(t,"l",(function(){return R})),n.d(t,"h",(function(){return P})),n.d(t,"n",(function(){return D})),n.d(t,"s",(function(){return F})),n.d(t,"q",(function(){return C}));var r=n(9),i=n(30),a=n(51),o=new("undefined"===typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});o.decode();var s=null;function c(){return null!==s&&s.buffer===a.c.buffer||(s=new Uint8Array(a.c.buffer)),s}function u(e,t){return o.decode(c().subarray(e,e+t))}var d=new Array(32).fill(void 0);d.push(void 0,null,!0,!1);var l=d.length;function f(e){l===d.length&&d.push(d.length+1);var t=l;return l=d[t],d[t]=e,t}function m(e){return d[e]}function p(e){var t=m(e);return function(e){e<36||(d[e]=l,l=e)}(e),t}function b(e){return function(){try{return e.apply(this,arguments)}catch(t){a.b(f(t))}}}var j=function(){function e(t,n,i,o){Object(r.a)(this,e);var s=a.f(t,n,i,o);return e.__wrap(s)}return Object(i.a)(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();a.a(e)}},{key:"get_positions",value:function(){return p(a.e(this.ptr))}},{key:"get_agent_types",value:function(){return p(a.d(this.ptr))}},{key:"step",value:function(){return 0!==a.h(this.ptr)}},{key:"set_similarity",value:function(e){a.g(this.ptr,e)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),h=function(e,t){return f(JSON.parse(u(e,t)))},g=b((function(e,t){m(e).getRandomValues(m(t))})),y=b((function(e,t,n){var r,i;m(e).randomFillSync((r=t,i=n,c().subarray(r/1,r/1+i)))})),x=b((function(){return f(self.self)})),S=function(e){p(e)},v=function(){return f(e)},O=b((function(e,t,n){return f(m(e).require(u(t,n)))})),w=function(e){return f(m(e).crypto)},k=function(e){return f(m(e).msCrypto)},N=function(e){return void 0===m(e)},z=function(e){return f(m(e).buffer)},T=function(e){return m(e).length},_=function(e){return f(new Uint8Array(m(e)))},R=function(e,t,n){m(e).set(m(t),n>>>0)},P=function(e){return f(new Uint8Array(e>>>0))},D=function(e,t,n){return f(m(e).subarray(t>>>0,n>>>0))},F=function(e,t){throw new Error(u(e,t))},C=function(){return f(a.c)}}).call(this,n(50)(e))},39:function(e,t,n){},51:function(e,t,n){"use strict";var r=n.w[e.i];e.exports=r;n(3);r.i()}}]);
//# sourceMappingURL=3.e648b82f.chunk.js.map