(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[3],{1:function(e,t,n){"use strict";n.r(t);var i=n(2),a=n.n(i),r=n(31),o=n.n(r),s=(n(163),n(56)),c=n(54),l=n(357),u=n(356),d=n(96),p=n(355),b=n(4),m={Man1:"man1.gltf",Man2:"man2.gltf"},f=function(e){var t=e.modelType,n=Object(d.a)(e,["modelType"]),a=Object(i.useRef)(),r=Object(p.a)(m[t]).nodes;return Object(b.jsxs)("group",Object(s.a)(Object(s.a)({ref:a},n),{},{dispose:null,castShadow:!0,children:[Object(b.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Body1.geometry,material:r.Body1.material}),Object(b.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.Head1.geometry,material:r.Head1.material}),Object(b.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.ArmLeft1.geometry,material:r.ArmLeft1.material}),Object(b.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.ArmRight1.geometry,material:r.ArmRight1.material}),Object(b.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.LegLeft1.geometry,material:r.LegLeft1.material}),Object(b.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:r.LegRight1.geometry,material:r.LegRight1.material})]}))};p.a.preload(m.Man1),p.a.preload(m.Man2);var h,j=n(345),y=n(32),g=function(e){var t=e.boardSize,n=e.tileSize,i=e.margin;return Object(b.jsx)("mesh",{receiveShadow:!0,position:[0,-.01,0],rotation:[Math.PI/2,0,0],children:Array(t*t).fill(0).map((function(e,a){var r=a%t*n,o=Math.floor(a/t)*n;return Object(b.jsxs)("group",{children:[Object(b.jsx)(j.a,{receiveShadow:!0,args:[n-i,n-i],position:[r,o,0],children:Object(b.jsx)("meshBasicMaterial",{attach:"material",color:"#55565e",side:y.DoubleSide,opacity:.5})}),Object(b.jsx)(j.a,{receiveShadow:!0,args:[n-i,n-i],position:[r,o,0],children:Object(b.jsx)("shadowMaterial",{attach:"material",color:"#000",side:y.DoubleSide,opacity:.5})})]},a)}))})},x=n(106),v=n(8);!function(e){e[e.Empty=0]="Empty",e[e.Stopped=1]="Stopped",e[e.Running=2]="Running",e[e.Finished=3]="Finished"}(h||(h={}));var O=.2,S=20,w=5,N=4,k=25,_=15,D=.1,z=.99,T=.6,F=0,R=1,L=.75,A=Object(x.a)((function(e,t){return{nAgents:0,ticksPerSecond:w,setTicksPerSecond:function(t){var n=t<=S?+(O+t/S*(1-O)).toFixed(1):t-S;e({ticksPerSecond:n})},boardSize:_,setBoardSize:function(t){return e({boardSize:t})},density:T,setDensity:function(t){return e({density:t})},similarity:L,setSimilarity:function(t){return e((function(e){var n=e.engine;return void 0!==n&&n.set_similarity(t),{similarity:t}}))},positions:[],modelTypes:[],boardState:h.Empty,setupEngine:function(){e((function(e){var t=e.boardSize,n=e.density,i=e.similarity,a=new v.a(t,t,n,i),r=a.n_unhappy();return{engine:a,nAgents:a.n_agents(),positions:a.get_positions(),modelTypes:a.get_agent_types(),boardState:h.Stopped,nUnhappy:r,plotData:[{nUnhappy:r,similarNearbyRatio:a.get_similar_nearby_ratio()}]}}))},step:function(){var n=t().engine;if(void 0!==n){var i=n.step(),a=i.finished,r=i.similar_nearby_ratio,o=i.n_unhappy;e((function(e){var t=e.boardState,i=e.plotData;return{positions:n.get_positions(),boardState:a?h.Finished:t,plotData:i.concat({nUnhappy:o,similarNearbyRatio:r})}}))}},toogleRun:function(){return e((function(e){var t=e.boardState;return{boardState:t===h.Stopped?h.Running:t===h.Running?h.Stopped:t}}))},nUnhappy:0,plotData:[]}})),P={tileSize:3,margin:.1},C=function(e){return{boardSize:e.boardSize,positions:e.positions,modelTypes:e.modelTypes,boardState:e.boardState,ticksPerSecond:e.ticksPerSecond,step:e.step}},B=function(){var e=A(C),t=e.boardSize,n=e.positions,a=e.modelTypes,r=e.boardState,o=e.ticksPerSecond,d=e.step,p=(t-1)*P.tileSize/2;return Object(c.b)((function(e){var t=e.clock;r===h.Running&&t.elapsedTime>1/o&&(d(),t.start())})),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(l.a,{makeDefault:!0,position:[10,40,70],fov:50,zoom:1}),Object(b.jsx)("ambientLight",{intensity:.2}),Object(b.jsx)("pointLight",{castShadow:!0,position:[5,30,35],intensity:.5}),Object(b.jsx)(i.Suspense,{fallback:null,children:Object(b.jsxs)("group",{position:[-p,0,-p],children:[Object(b.jsx)(g,Object(s.a)({boardSize:t},P)),n.map((function(e,t){return Object(b.jsx)(f,{scale:.25,modelType:a[t],position:[e[0]*P.tileSize,0,e[1]*P.tileSize]},t)}))]})}),Object(b.jsx)(u.a,{})]})},U=function(e){var t=e.className;return Object(b.jsx)("div",{className:t,children:Object(b.jsx)(c.a,{shadows:!0,children:Object(b.jsx)(B,{})})})},V=function(e){var t=e.title,n=e.showValue,i=e.className,a=e.min,r=void 0===a?1:a,o=e.max,s=void 0===o?100:o,c=e.step,l=void 0===c?1:c,u=e.defaultValue,d=void 0===u?50:u,p=e.onChange,m=void 0===p?function(){}:p;return Object(b.jsx)("div",{className:i,children:Object(b.jsxs)("div",{className:"group p-2 pb-3 flex flex-col bg-gray-400 bg-opacity-60 border-2 border-opacity-25 hover:border-opacity-30 border-gray-400 shadow rounded",children:[void 0!==t?Object(b.jsxs)("p",{className:"text-sm font-bold text-gray-700 group-hover:text-gray-900",children:[t," ",void 0!==n?Object(b.jsxs)("span",{className:"opacity-0 group-hover:opacity-100",children:["(",n,")"]}):null]}):null,Object(b.jsx)("input",{className:"mt-2.5 slider appearance-none outline-none w-full h-1.5 hover:bg-green-50 focus:ring ring-green-600 ring-opacity-50 rounded-full shadow-md",type:"range",min:r,max:s,step:l,defaultValue:d,onChange:function(e){var t=e.target;return m(+t.value)}})]})})},M=function(e){return{setupEngine:e.setupEngine,step:e.step,ticksPerSecond:e.ticksPerSecond,setTicksPerSecond:e.setTicksPerSecond,boardSize:e.boardSize,setBoardSize:e.setBoardSize,density:e.density,setDensity:e.setDensity,similarity:e.similarity,setSimilarity:e.setSimilarity,boardState:e.boardState,toogleRun:e.toogleRun}},E=function(e){var t=e.className,n=A(M),i=n.setupEngine,a=n.step,r=n.ticksPerSecond,o=n.setTicksPerSecond,s=n.boardSize,c=n.setBoardSize,l=n.density,u=n.setDensity,d=n.similarity,p=n.setSimilarity,m=n.boardState,f=n.toogleRun;return Object(b.jsxs)("div",{className:t,children:[Object(b.jsxs)("div",{className:"flex flex-wrap space-x-2 justify-between",children:[Object(b.jsx)("button",{className:"flex-1 btn",onClick:i,children:"Setup"}),Object(b.jsx)("button",{className:"flex-1 btn",onClick:a,disabled:m!==h.Stopped,children:"1-step"}),Object(b.jsx)("button",{className:"flex-1 btn ".concat(m===h.Running?"bg-green-600 hover:bg-red-700":""," ").concat(m===h.Finished?"disabled:opacity-100 disabled:bg-green-600":""),onClick:f,disabled:m===h.Empty||m===h.Finished,children:m===h.Finished?"Finished!":m===h.Running?"Stop":"Run"})]}),Object(b.jsxs)("div",{className:"mt-4 grid grid-cols-1 xl:grid-cols-2 gap-2",children:[Object(b.jsx)(V,{title:"Ticks per second",min:0,max:2*S,defaultValue:S+w,showValue:r,onChange:o}),Object(b.jsx)(V,{title:"Board size",min:N,max:k,defaultValue:s,showValue:s,onChange:c}),Object(b.jsx)(V,{title:"Density",min:D,max:z,step:.01,defaultValue:l,showValue:l,onChange:u}),Object(b.jsx)(V,{title:"Similarity wanted",min:F,max:R,step:.01,defaultValue:d,showValue:d,onChange:p})]})]})},H=n(346),q=n(347),I=n(339),J=n(352),W=n(333),G=n(35),K=n(334),Q=n(342),X=function(e){var t=e.title,n=e.plotData,i=e.datakey,a=e.tooltipLabel,r=e.yAxisDecimals,o=e.className,s=e.children;return Object(b.jsx)("div",{className:o,children:Object(b.jsxs)("div",{className:"px-2 lg:px-4 pt-2 pb-2 lg:pb-4 bg-gray-400 bg-opacity-60 rounded ",children:[Object(b.jsx)("p",{className:"font-bold text-gray-700 text-center",children:t}),Object(b.jsx)(H.a,{className:"mt-1.5 bg-white w-full rounded",minHeight:150,children:Object(b.jsxs)(q.a,{data:n,margin:{top:10,right:10,bottom:5,left:5},children:[Object(b.jsx)(I.a,{dataKey:i,stroke:"#5e665e",strokeWidth:2,dot:!1}),Object(b.jsx)(J.a,{stroke:"#ccc",strokeWidth:.5}),Object(b.jsx)(W.a,{fontSize:11,height:35,tickSize:4,children:Object(b.jsx)(G.a,{value:"Time",position:"insideBottom",fontSize:12,offset:4})}),Object(b.jsx)(K.a,{fontSize:11,width:20,tickSize:4,tickFormatter:function(e){return e.toFixed(r)}}),Object(b.jsx)(Q.a,{content:Object(b.jsx)(Y,{tooltipLabel:a,valueDecimals:r})})]})}),s]})})},Y=function(e){var t=e.active,n=e.payload,i=e.label,a=e.tooltipLabel,r=e.valueDecimals;if(t&&n&&n.length){var o=n[0].value;return Object(b.jsxs)("div",{className:"px-2 py-1 text-sm font-bold bg-gray-700 text-white bg-opacity-75 rounded shadow",children:[Object(b.jsxs)("p",{children:["Time: ",i]}),Object(b.jsxs)("p",{children:[a,": ",o.toFixed(r)]})]})}return null},Z=function(e){return{n_agents:e.nAgents,n_unhappy:e.nUnhappy,plotData:e.plotData}},$=function(e){var t=e.className,n=A(Z),i=n.n_agents,a=n.n_unhappy,r=n.plotData,o=r.length>0?r[r.length-1]:void 0;return Object(b.jsx)("div",{className:t,children:Object(b.jsxs)("div",{className:"flex flex-col",children:[Object(b.jsx)(X,{title:"Global similarity",plotData:r,datakey:"similarNearbyRatio",tooltipLabel:"Similarity",yAxisDecimals:1,children:Object(b.jsxs)("div",{className:"flex flex-wrap justify-between mt-2 px-2 text-sm font-bold",children:[Object(b.jsxs)("p",{children:["Number of agents: ",i]}),void 0!==o?Object(b.jsxs)("p",{children:["Current similarity: ",o.similarNearbyRatio.toFixed(2)]}):null]})}),Object(b.jsx)(X,{className:"mt-4",title:"Number-unhappy",plotData:r,datakey:"nUnhappy",tooltipLabel:"# Unhappy",yAxisDecimals:0,children:Object(b.jsxs)("div",{className:"flex flex-wrap justify-between mt-2 px-2 text-sm font-bold",children:[Object(b.jsxs)("p",{children:["Number of unhappy: ",a]}),Object(b.jsxs)("p",{children:["Unhappy / Total: ",(a/i).toFixed(2)]})]})})]})})},ee=n(335),te=n(336),ne=function(e){var t=e.className;return Object(b.jsx)("div",{className:t,children:Object(b.jsxs)("div",{className:"flex flex-col px-2 lg:px-4 py-3 lg:pt-4",children:[Object(b.jsx)("p",{className:"text-2xl xl:text-3xl font-bold",children:"Segregation Model"}),Object(b.jsx)(ee.a,{as:"div",className:"mt-6 px-2 py-1 text-sm xl:text-base bg-gray-50 hover:bg-white rounded shadow",children:function(e){var t=e.open;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(ee.a.Button,{className:"w-full flex justify-between items-center focus:outline-none",children:[Object(b.jsx)("span",{className:"pl-1 font-medium",children:"Description"}),Object(b.jsx)(te.a,{className:"".concat(t?"transform rotate-180":""," w-5 h-5 text-gray-900")})]}),Object(b.jsx)(ee.b,{show:t,enter:"transform origin-top transition duration-100 ease-out",enterFrom:"opacity-0 scale-y-90",enterTo:"opacity-100 scale-y-100",leave:"transform origin-top transition duration-75 ease-out",leaveFrom:"opacity-100 scale-y-100",leaveTo:"opacity-0 scale-y-90",children:Object(b.jsx)(ee.a.Panel,{static:!0,children:Object(b.jsxs)("p",{className:"mt-2 text-justify",children:["This is an agent based simulation based on"," ",Object(b.jsx)("a",{className:"font-bold",href:"http://ccl.northwestern.edu/netlogo/models/Segregation",target:"_black",rel:"noopener",children:"Wilensky, U. (1997). NetLogo Segregation model"}),'. Here we have two types of agents, each agent wants to live near some agents of the same type (controlled by "Similarity wanted"). At each tick the agents will move if they are not happy based on the similarity wanted.']})})})]})}}),Object(b.jsx)(E,{className:"mt-4"}),Object(b.jsx)($,{className:"mt-4"})]})})},ie=function(){return Object(b.jsx)("div",{className:"min-h-screen p-2",children:Object(b.jsxs)("div",{className:"flex h-full",children:[Object(b.jsx)(ne,{className:"w-1/3 bg-gray-200 rounded-lg"}),Object(b.jsx)(U,{className:"ml-2 flex-1 miin-h-screen bg-gray-900"})]})})},ae=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,353)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),i(e),a(e),r(e),o(e)}))};o.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(ie,{})}),document.getElementById("root")),ae()},163:function(e,t,n){},174:function(e,t,n){"use strict";var i=n.w[e.i];e.exports=i;n(8);i.l()},8:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h})),n.d(t,"p",(function(){return j})),n.d(t,"d",(function(){return y})),n.d(t,"i",(function(){return g})),n.d(t,"k",(function(){return x})),n.d(t,"r",(function(){return v})),n.d(t,"m",(function(){return O})),n.d(t,"j",(function(){return S})),n.d(t,"c",(function(){return w})),n.d(t,"f",(function(){return N})),n.d(t,"o",(function(){return k})),n.d(t,"b",(function(){return _})),n.d(t,"e",(function(){return D})),n.d(t,"g",(function(){return z})),n.d(t,"l",(function(){return T})),n.d(t,"h",(function(){return F})),n.d(t,"n",(function(){return R})),n.d(t,"s",(function(){return L})),n.d(t,"q",(function(){return A}));var i=n(40),a=n(104),r=n(174),o=new("undefined"===typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});o.decode();var s=null;function c(){return null!==s&&s.buffer===r.c.buffer||(s=new Uint8Array(r.c.buffer)),s}function l(e,t){return o.decode(c().subarray(e,e+t))}var u=new Array(32).fill(void 0);u.push(void 0,null,!0,!1);var d=u.length;function p(e){d===u.length&&u.push(u.length+1);var t=d;return d=u[t],u[t]=e,t}function b(e){return u[e]}function m(e){var t=b(e);return function(e){e<36||(u[e]=d,d=e)}(e),t}function f(e){return function(){try{return e.apply(this,arguments)}catch(t){r.b(p(t))}}}var h=function(){function e(t,n,a,o){Object(i.a)(this,e);var s=r.i(t,n,a,o);return e.__wrap(s)}return Object(a.a)(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();r.a(e)}},{key:"n_agents",value:function(){return r.g(this.ptr)>>>0}},{key:"n_unhappy",value:function(){return r.h(this.ptr)>>>0}},{key:"get_similar_nearby_ratio",value:function(){return r.f(this.ptr)}},{key:"get_positions",value:function(){return m(r.e(this.ptr))}},{key:"get_agent_types",value:function(){return m(r.d(this.ptr))}},{key:"step",value:function(){return m(r.k(this.ptr))}},{key:"set_similarity",value:function(e){r.j(this.ptr,e)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),j=function(e,t){return p(JSON.parse(l(e,t)))},y=f((function(e,t){b(e).getRandomValues(b(t))})),g=f((function(e,t,n){var i,a;b(e).randomFillSync((i=t,a=n,c().subarray(i/1,i/1+a)))})),x=f((function(){return p(self.self)})),v=function(e){m(e)},O=function(){return p(e)},S=f((function(e,t,n){return p(b(e).require(l(t,n)))})),w=function(e){return p(b(e).crypto)},N=function(e){return p(b(e).msCrypto)},k=function(e){return void 0===b(e)},_=function(e){return p(b(e).buffer)},D=function(e){return b(e).length},z=function(e){return p(new Uint8Array(b(e)))},T=function(e,t,n){b(e).set(b(t),n>>>0)},F=function(e){return p(new Uint8Array(e>>>0))},R=function(e,t,n){return p(b(e).subarray(t>>>0,n>>>0))},L=function(e,t){throw new Error(l(e,t))},A=function(){return p(r.c)}}).call(this,n(173)(e))}}]);
//# sourceMappingURL=3.0ed9f9fc.chunk.js.map