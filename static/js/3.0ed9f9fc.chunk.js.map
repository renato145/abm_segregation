{"version":3,"sources":["components/Model.tsx","store.ts","components/FloorPlane.tsx","components/BaseCanvas.tsx","components/Slider.tsx","components/Controls.tsx","components/LinePlot.tsx","components/Plots.tsx","components/Description.tsx","App.tsx","reportWebVitals.ts","setup.tsx","../../engine-wasm/pkg/engine_wasm_bg.js"],"names":["ModelLocation","Model","modelType","props","group","useRef","nodes","useGLTF","ref","dispose","castShadow","receiveShadow","geometry","Body1","material","Head1","ArmLeft1","ArmRight1","LegLeft1","LegRight1","preload","BoardState","FloorPlane","boardSize","tileSize","margin","position","rotation","Math","PI","Array","fill","map","_","i","x","y","floor","args","attach","color","side","DoubleSide","opacity","TICKS_INFO","BOARD_SIZE_DEFAULTS","DENSITY_DEFAULTS","SIMILARITY_DEFAULTS","useStore","create","set","get","nAgents","ticksPerSecond","setTicksPerSecond","toFixed","setBoardSize","density","setDensity","similarity","setSimilarity","engine","undefined","set_similarity","positions","modelTypes","boardState","Empty","setupEngine","SegregationEngine","nUnhappy","n_unhappy","n_agents","get_positions","get_agent_types","Stopped","plotData","similarNearbyRatio","get_similar_nearby_ratio","step","finished","similar_nearby_ratio","Finished","concat","toogleRun","Running","PlaneConfig","selector","CanvasContent","offset","useFrame","clock","elapsedTime","start","PerspectiveCamera","makeDefault","fov","zoom","intensity","fallback","o","scale","OrbitControls","BaseCanvas","className","shadows","Slider","title","showValue","min","max","defaultValue","onChange","type","target","value","Controls","onClick","disabled","LinePlot","datakey","tooltipLabel","yAxisDecimals","children","ResponsiveContainer","minHeight","LineChart","data","top","right","bottom","left","Line","dataKey","stroke","strokeWidth","dot","CartesianGrid","XAxis","fontSize","height","tickSize","Label","YAxis","width","tickFormatter","Tooltip","content","valueDecimals","CustomTooltip","active","payload","label","length","Plots","lastRead","Description","as","open","Button","show","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","Panel","static","href","rel","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","cachedTextDecoder","TextDecoder","module","require","ignoreBOM","fatal","decode","cachegetUint8Memory0","getUint8Memory0","buffer","wasm","Uint8Array","getStringFromWasm0","ptr","len","subarray","heap","push","heap_next","addHeapObject","obj","idx","getObject","takeObject","ret","dropObject","handleError","f","apply","this","arguments","e","rows","cols","__wrap","__destroy_into_raw","Object","prototype","__wbindgen_json_parse","arg0","arg1","JSON","parse","__wbg_getRandomValues_57e4008f45f0e105","getRandomValues","__wbg_randomFillSync_d90848a552cbd666","arg2","randomFillSync","__wbg_self_f865985e662246aa","self","__wbindgen_object_drop_ref","__wbg_static_accessor_MODULE_39947eb3fe77895f","__wbg_require_c59851dfa0dc7e78","__wbg_crypto_bfb05100db79193b","crypto","__wbg_msCrypto_f6dddc6ae048b7e2","msCrypto","__wbindgen_is_undefined","__wbg_buffer_ebc6c8e75510eae3","__wbg_length_317f0dd77f7a6673","__wbg_new_135e963dedf67b22","__wbg_set_4a5072a31008e0cb","__wbg_newwithlength_78dc302d31527318","__wbg_subarray_34c228a45c72d146","__wbindgen_throw","Error","__wbindgen_memory"],"mappings":"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","file":"static/js/3.0ed9f9fc.chunk.js","sourcesContent":["/*\nAuto-generated by: https://github.com/pmndrs/gltfjsx\n*/\n\nimport * as THREE from \"three\";\nimport React, { useRef } from \"react\";\nimport { useGLTF } from \"@react-three/drei\";\nimport { GLTF } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport { TAgentType } from \"engine-wasm\";\n\ntype GLTFResult = GLTF & {\n  nodes: {\n    Body1: THREE.Mesh;\n    Head1: THREE.Mesh;\n    ArmLeft1: THREE.Mesh;\n    ArmRight1: THREE.Mesh;\n    LegLeft1: THREE.Mesh;\n    LegRight1: THREE.Mesh;\n  };\n  materials: {\n    lambert1: THREE.MeshStandardMaterial;\n  };\n};\n\nconst ModelLocation: Record<TAgentType[0], string> = {\n  \"Man1\": \"man1.gltf\",\n  \"Man2\": \"man2.gltf\",\n};\n\ntype Props = {\n  modelType: keyof typeof ModelLocation;\n} & JSX.IntrinsicElements[\"group\"];\n\nexport const Model = ({ modelType, ...props }: Props) => {\n  const group = useRef<THREE.Group>();\n  const { nodes } = useGLTF(ModelLocation[modelType]) as GLTFResult;\n\n  return (\n    <group ref={group} {...props} dispose={null} castShadow>\n      <mesh\n        castShadow\n        receiveShadow\n        geometry={nodes.Body1.geometry}\n        material={nodes.Body1.material}\n      />\n      <mesh\n        castShadow\n        receiveShadow\n        geometry={nodes.Head1.geometry}\n        material={nodes.Head1.material}\n      />\n      <mesh\n        castShadow\n        receiveShadow\n        geometry={nodes.ArmLeft1.geometry}\n        material={nodes.ArmLeft1.material}\n      />\n      <mesh\n        castShadow\n        receiveShadow\n        geometry={nodes.ArmRight1.geometry}\n        material={nodes.ArmRight1.material}\n      />\n      <mesh\n        castShadow\n        receiveShadow\n        geometry={nodes.LegLeft1.geometry}\n        material={nodes.LegLeft1.material}\n      />\n      <mesh\n        castShadow\n        receiveShadow\n        geometry={nodes.LegRight1.geometry}\n        material={nodes.LegRight1.material}\n      />\n    </group>\n  );\n};\n\nuseGLTF.preload(ModelLocation[\"Man1\"]);\nuseGLTF.preload(ModelLocation[\"Man2\"]);\n","import create from \"zustand\";\nimport { SegregationEngine, TPositions, TAgentType } from \"engine-wasm\";\n\nexport enum BoardState {\n  Empty,\n  Stopped,\n  Running,\n  Finished,\n}\n\nexport const TICKS_INFO = {\n  min: 0.2, // 5 seconds for 1 tick\n  max: 20, // 20 ticks per second\n  default: 5,\n};\n\nexport const BOARD_SIZE_DEFAULTS = {\n  min: 4,\n  max: 25,\n  default: 15,\n};\n\nexport const DENSITY_DEFAULTS = {\n  min: 0.1,\n  max: 0.99,\n  default: 0.6,\n};\n\nexport const SIMILARITY_DEFAULTS = {\n  min: 0,\n  max: 1,\n  default: 0.75,\n};\n\nexport type TStore = {\n  engine?: SegregationEngine;\n  nAgents: number;\n  ticksPerSecond: number;\n  setTicksPerSecond: (x: number) => void;\n  boardSize: number;\n  setBoardSize: (x: number) => void;\n  density: number;\n  setDensity: (x: number) => void;\n  similarity: number;\n  setSimilarity: (x: number) => void;\n  positions: TPositions;\n  modelTypes: TAgentType;\n  boardState: BoardState;\n  setupEngine: () => void;\n  step: () => void;\n  toogleRun: () => void;\n  nUnhappy: number;\n  plotData: {\n    similarNearbyRatio: number;\n    nUnhappy: number;\n  }[];\n};\n\nexport const useStore = create<TStore>((set, get) => ({\n  nAgents: 0,\n  ticksPerSecond: TICKS_INFO.default,\n  setTicksPerSecond: (x) => {\n    const ticksPerSecond =\n      x <= TICKS_INFO.max\n        ? +(\n            TICKS_INFO.min +\n            (x / TICKS_INFO.max) * (1 - TICKS_INFO.min)\n          ).toFixed(1)\n        : x - TICKS_INFO.max;\n    set({ ticksPerSecond });\n  },\n  boardSize: BOARD_SIZE_DEFAULTS.default,\n  setBoardSize: (x) => set({ boardSize: x }),\n  density: DENSITY_DEFAULTS.default,\n  setDensity: (x) => set({ density: x }),\n  similarity: SIMILARITY_DEFAULTS.default,\n  setSimilarity: (x) =>\n    set(({ engine }) => {\n      if (engine !== undefined) engine.set_similarity(x);\n      return { similarity: x };\n    }),\n  positions: [],\n  modelTypes: [],\n  boardState: BoardState.Empty,\n  setupEngine: () => {\n    set(({ boardSize, density, similarity }) => {\n      const engine = new SegregationEngine(\n        boardSize,\n        boardSize,\n        density,\n        similarity\n      );\n      const nUnhappy = engine.n_unhappy();\n\n      return {\n        engine,\n        nAgents: engine.n_agents(),\n        positions: engine.get_positions(),\n        modelTypes: engine.get_agent_types(),\n        boardState: BoardState.Stopped,\n        nUnhappy: nUnhappy,\n        plotData: [\n          { nUnhappy, similarNearbyRatio: engine.get_similar_nearby_ratio() },\n        ],\n      };\n    });\n  },\n  step: () => {\n    const engine = get().engine;\n    if (engine === undefined) return;\n    const { finished, similar_nearby_ratio, n_unhappy } = engine.step();\n    set(({ boardState, plotData }) => ({\n      positions: engine.get_positions(),\n      boardState: finished ? BoardState.Finished : boardState,\n      plotData: plotData.concat({\n        nUnhappy: n_unhappy,\n        similarNearbyRatio: similar_nearby_ratio,\n      }),\n    }));\n  },\n  toogleRun: () =>\n    set(({ boardState }) => ({\n      boardState:\n        boardState === BoardState.Stopped\n          ? BoardState.Running\n          : boardState === BoardState.Running\n          ? BoardState.Stopped\n          : boardState,\n    })),\n  nUnhappy: 0,\n  plotData: [],\n}));\n","import { Plane } from \"@react-three/drei\";\nimport React from \"react\";\nimport { DoubleSide } from \"three\";\n\ninterface Props {\n  boardSize: number;\n  tileSize: number;\n  margin: number;\n}\n\nexport const FloorPlane: React.FC<Props> = ({\n  boardSize,\n  tileSize,\n  margin,\n}) => {\n  return (\n    <mesh receiveShadow position={[0, -0.01, 0]} rotation={[Math.PI / 2, 0, 0]}>\n      {Array(boardSize * boardSize)\n        .fill(0)\n        .map((_, i) => {\n          const x = (i % boardSize) * tileSize;\n          const y = Math.floor(i / boardSize) * tileSize;\n          return (\n            <group key={i}>\n              <Plane\n                receiveShadow\n                args={[tileSize - margin, tileSize - margin]}\n                position={[x, y, 0]}\n              >\n                <meshBasicMaterial\n                  attach=\"material\"\n                  color=\"#55565e\"\n                  side={DoubleSide}\n                  opacity={0.5}\n                />\n              </Plane>\n              <Plane\n                receiveShadow\n                args={[tileSize - margin, tileSize - margin]}\n                position={[x, y, 0]}\n              >\n                <shadowMaterial\n                  attach=\"material\"\n                  color=\"#000\"\n                  side={DoubleSide}\n                  opacity={0.5}\n                />\n              </Plane>\n            </group>\n          );\n        })}\n    </mesh>\n  );\n};\n","import React, { Suspense } from \"react\";\nimport { Canvas, useFrame } from \"@react-three/fiber\";\nimport { OrbitControls, PerspectiveCamera } from \"@react-three/drei\";\nimport { Model } from \"./Model\";\nimport { FloorPlane } from \"./FloorPlane\";\nimport { BoardState, TStore, useStore } from \"../store\";\n\ninterface Props {\n  className: string;\n}\n\nconst PlaneConfig = {\n  tileSize: 3,\n  margin: 0.1,\n};\n\nconst selector = ({\n  boardSize,\n  positions,\n  modelTypes,\n  boardState,\n  ticksPerSecond,\n  step,\n}: TStore) => ({\n  boardSize,\n  positions,\n  modelTypes,\n  boardState,\n  ticksPerSecond,\n  step,\n});\n\nconst CanvasContent: React.FC = () => {\n  const {\n    boardSize,\n    positions,\n    modelTypes,\n    boardState,\n    ticksPerSecond,\n    step,\n  } = useStore(selector);\n  // const ref = useRef();\n  // useHelper(ref, PointLightHelper, 2, \"yellow\");\n  const offset = ((boardSize - 1) * PlaneConfig.tileSize) / 2;\n\n  // useFrame(({ clock: { elapsedTime } }) => {\n  useFrame(({ clock }) => {\n    if (\n      boardState === BoardState.Running &&\n      clock.elapsedTime > 1 / ticksPerSecond\n    ) {\n      step();\n      clock.start();\n    }\n  });\n\n  return (\n    <>\n      <PerspectiveCamera\n        makeDefault\n        position={[10, 40, 70]}\n        fov={50}\n        zoom={1.0}\n      />\n      <ambientLight intensity={0.2} />\n      <pointLight\n        // ref={ref}\n        castShadow\n        position={[5, 30, 35]}\n        intensity={0.5}\n      />\n\n      <Suspense fallback={null}>\n        <group position={[-offset, 0, -offset]}>\n          <FloorPlane boardSize={boardSize} {...PlaneConfig} />\n          {positions.map((o, i) => (\n            <Model\n              key={i}\n              scale={0.25}\n              modelType={modelTypes[i]}\n              position={[\n                o[0] * PlaneConfig.tileSize,\n                0,\n                o[1] * PlaneConfig.tileSize,\n              ]}\n            />\n          ))}\n        </group>\n      </Suspense>\n      <OrbitControls />\n    </>\n  );\n};\n\nexport const BaseCanvas: React.FC<Props> = ({ className }) => {\n  return (\n    <div className={className}>\n      <Canvas shadows>\n        <CanvasContent />\n      </Canvas>\n    </div>\n  );\n};\n","import React from \"react\";\n\ninterface Props {\n  title?: string;\n  showValue?: number;\n  className?: string;\n  min?: number;\n  max?: number;\n  step?: number;\n  defaultValue?: number;\n  onChange?: (value: number) => void;\n}\n\nexport const Slider: React.FC<Props> = ({\n  title,\n  showValue,\n  className,\n  min = 1,\n  max = 100,\n  step = 1,\n  defaultValue = 50,\n  onChange = () => {},\n}) => {\n  return (\n    <div className={className}>\n      <div className=\"group p-2 pb-3 flex flex-col bg-gray-400 bg-opacity-60 border-2 border-opacity-25 hover:border-opacity-30 border-gray-400 shadow rounded\">\n        {title !== undefined ? (\n          <p className=\"text-sm font-bold text-gray-700 group-hover:text-gray-900\">\n            {title}{\" \"}\n            {showValue !== undefined ? (\n              <span className=\"opacity-0 group-hover:opacity-100\">\n                ({showValue})\n              </span>\n            ) : null}\n          </p>\n        ) : null}\n        <input\n          className=\"mt-2.5 slider appearance-none outline-none w-full h-1.5 hover:bg-green-50 focus:ring ring-green-600 ring-opacity-50 rounded-full shadow-md\"\n          type=\"range\"\n          min={min}\n          max={max}\n          step={step}\n          defaultValue={defaultValue}\n          onChange={({ target }) => onChange(+target.value)}\n        />\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport {\n  BoardState,\n  BOARD_SIZE_DEFAULTS,\n  DENSITY_DEFAULTS,\n  SIMILARITY_DEFAULTS,\n  TICKS_INFO,\n  TStore,\n  useStore,\n} from \"../store\";\nimport { Slider } from \"./Slider\";\n\ninterface Props {\n  className: string;\n}\n\nconst selector = ({\n  setupEngine,\n  step,\n  ticksPerSecond,\n  setTicksPerSecond,\n  boardSize,\n  setBoardSize,\n  density,\n  setDensity,\n  similarity,\n  setSimilarity,\n  boardState,\n  toogleRun,\n}: TStore) => ({\n  setupEngine,\n  step,\n  ticksPerSecond,\n  setTicksPerSecond,\n  boardSize,\n  setBoardSize,\n  density,\n  setDensity,\n  similarity,\n  setSimilarity,\n  boardState,\n  toogleRun,\n});\n\nexport const Controls: React.FC<Props> = ({ className }) => {\n  const {\n    setupEngine,\n    step,\n    ticksPerSecond,\n    setTicksPerSecond,\n    boardSize,\n    setBoardSize,\n    density,\n    setDensity,\n    similarity,\n    setSimilarity,\n    boardState,\n    toogleRun,\n  } = useStore(selector);\n\n  return (\n    <div className={className}>\n      <div className=\"flex flex-wrap space-x-2 justify-between\">\n        <button className=\"flex-1 btn\" onClick={setupEngine}>\n          Setup\n        </button>\n        <button\n          className=\"flex-1 btn\"\n          onClick={step}\n          disabled={boardState !== BoardState.Stopped}\n        >\n          1-step\n        </button>\n        <button\n          className={`flex-1 btn ${\n            boardState === BoardState.Running\n              ? \"bg-green-600 hover:bg-red-700\"\n              : \"\"\n          } ${\n            boardState === BoardState.Finished\n              ? \"disabled:opacity-100 disabled:bg-green-600\"\n              : \"\"\n          }`}\n          onClick={toogleRun}\n          disabled={\n            boardState === BoardState.Empty ||\n            boardState === BoardState.Finished\n          }\n        >\n          {boardState === BoardState.Finished\n            ? \"Finished!\"\n            : boardState === BoardState.Running\n            ? \"Stop\"\n            : \"Run\"}\n        </button>\n      </div>\n      <div className=\"mt-4 grid grid-cols-1 xl:grid-cols-2 gap-2\">\n        <Slider\n          title=\"Ticks per second\"\n          min={0}\n          max={TICKS_INFO.max * 2}\n          defaultValue={TICKS_INFO.max + TICKS_INFO.default}\n          showValue={ticksPerSecond}\n          onChange={setTicksPerSecond}\n        />\n        <Slider\n          title=\"Board size\"\n          min={BOARD_SIZE_DEFAULTS.min}\n          max={BOARD_SIZE_DEFAULTS.max}\n          defaultValue={boardSize}\n          showValue={boardSize}\n          onChange={setBoardSize}\n        />\n        <Slider\n          title=\"Density\"\n          min={DENSITY_DEFAULTS.min}\n          max={DENSITY_DEFAULTS.max}\n          step={0.01}\n          defaultValue={density}\n          showValue={density}\n          onChange={setDensity}\n        />\n        <Slider\n          title=\"Similarity wanted\"\n          min={SIMILARITY_DEFAULTS.min}\n          max={SIMILARITY_DEFAULTS.max}\n          step={0.01}\n          defaultValue={similarity}\n          showValue={similarity}\n          onChange={setSimilarity}\n        />\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport {\n  CartesianGrid,\n  Label,\n  Line,\n  LineChart,\n  ResponsiveContainer,\n  Tooltip,\n  XAxis,\n  YAxis,\n} from \"recharts\";\nimport { TStore } from \"../store\";\n\ninterface Props {\n  title: string;\n  plotData: TStore[\"plotData\"];\n  datakey: keyof TStore[\"plotData\"][0];\n  tooltipLabel: string;\n  yAxisDecimals: number;\n  className?: string;\n}\n\nexport const LinePlot: React.FC<Props> = ({\n  title,\n  plotData,\n  datakey,\n  tooltipLabel,\n  yAxisDecimals,\n  className,\n  children,\n}) => {\n  return (\n    <div className={className}>\n      <div className=\"px-2 lg:px-4 pt-2 pb-2 lg:pb-4 bg-gray-400 bg-opacity-60 rounded \">\n        <p className=\"font-bold text-gray-700 text-center\">{title}</p>\n        <ResponsiveContainer\n          className=\"mt-1.5 bg-white w-full rounded\"\n          minHeight={150}\n        >\n          <LineChart\n            data={plotData}\n            margin={{ top: 10, right: 10, bottom: 5, left: 5 }}\n          >\n            <Line\n              dataKey={datakey}\n              stroke=\"#5e665e\"\n              strokeWidth={2}\n              dot={false}\n            />\n            <CartesianGrid stroke=\"#ccc\" strokeWidth={0.5} />\n            <XAxis fontSize={11} height={35} tickSize={4}>\n              <Label\n                value=\"Time\"\n                position=\"insideBottom\"\n                fontSize={12}\n                offset={4}\n              />\n            </XAxis>\n            <YAxis\n              fontSize={11}\n              width={20}\n              tickSize={4}\n              tickFormatter={(x: number) => x.toFixed(yAxisDecimals)}\n            />\n            <Tooltip\n              content={\n                <CustomTooltip\n                  tooltipLabel={tooltipLabel}\n                  valueDecimals={yAxisDecimals}\n                />\n              }\n            />\n          </LineChart>\n        </ResponsiveContainer>\n        {children}\n      </div>\n    </div>\n  );\n};\n\nconst CustomTooltip = ({\n  active,\n  payload,\n  label,\n  tooltipLabel,\n  valueDecimals,\n}: any) => {\n  if (active && payload && payload.length) {\n    const value = payload[0].value as number;\n\n    return (\n      <div className=\"px-2 py-1 text-sm font-bold bg-gray-700 text-white bg-opacity-75 rounded shadow\">\n        <p>Time: {label}</p>\n        <p>\n          {tooltipLabel}: {value.toFixed(valueDecimals)}\n        </p>\n      </div>\n    );\n  }\n  return null;\n};\n","import React from \"react\";\nimport { TStore, useStore } from \"../store\";\nimport { LinePlot } from \"./LinePlot\";\n\ninterface Props {\n  className?: string;\n}\n\nconst selector = ({\n  nAgents: n_agents,\n  nUnhappy: n_unhappy,\n  plotData,\n}: TStore) => ({\n  n_agents,\n  n_unhappy,\n  plotData,\n});\n\nexport const Plots: React.FC<Props> = ({ className }) => {\n  const { n_agents, n_unhappy, plotData } = useStore(selector);\n  const lastRead =\n    plotData.length > 0 ? plotData[plotData.length - 1] : undefined;\n\n  return (\n    <div className={className}>\n      <div className=\"flex flex-col\">\n        <LinePlot\n          title=\"Global similarity\"\n          plotData={plotData}\n          datakey=\"similarNearbyRatio\"\n          tooltipLabel=\"Similarity\"\n          yAxisDecimals={1}\n        >\n          <div className=\"flex flex-wrap justify-between mt-2 px-2 text-sm font-bold\">\n            <p>Number of agents: {n_agents}</p>\n            {lastRead !== undefined ? (\n              <p>\n                Current similarity: {lastRead[\"similarNearbyRatio\"].toFixed(2)}\n              </p>\n            ) : null}\n          </div>\n        </LinePlot>\n        <LinePlot\n          className=\"mt-4\"\n          title=\"Number-unhappy\"\n          plotData={plotData}\n          datakey=\"nUnhappy\"\n          tooltipLabel=\"# Unhappy\"\n          yAxisDecimals={0}\n        >\n          <div className=\"flex flex-wrap justify-between mt-2 px-2 text-sm font-bold\">\n            <p>Number of unhappy: {n_unhappy}</p>\n            <p>Unhappy / Total: {(n_unhappy / n_agents).toFixed(2)}</p>\n          </div>\n        </LinePlot>\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Controls } from \"./Controls\";\nimport { Plots } from \"./Plots\";\nimport { Disclosure, Transition } from \"@headlessui/react\";\nimport { ChevronUpIcon } from \"@heroicons/react/solid\";\n\ninterface Props {\n  className: string;\n}\n\nexport const Description: React.FC<Props> = ({ className }) => {\n  return (\n    <div className={className}>\n      <div className=\"flex flex-col px-2 lg:px-4 py-3 lg:pt-4\">\n        <p className=\"text-2xl xl:text-3xl font-bold\">Segregation Model</p>\n        <Disclosure\n          as=\"div\"\n          className=\"mt-6 px-2 py-1 text-sm xl:text-base bg-gray-50 hover:bg-white rounded shadow\"\n        >\n          {({ open }) => (\n            <>\n              <Disclosure.Button className=\"w-full flex justify-between items-center focus:outline-none\">\n                <span className=\"pl-1 font-medium\">Description</span>\n                <ChevronUpIcon\n                  className={`${\n                    open ? \"transform rotate-180\" : \"\"\n                  } w-5 h-5 text-gray-900`}\n                />\n              </Disclosure.Button>\n              <Transition\n                show={open}\n                enter=\"transform origin-top transition duration-100 ease-out\"\n                enterFrom=\"opacity-0 scale-y-90\"\n                enterTo=\"opacity-100 scale-y-100\"\n                leave=\"transform origin-top transition duration-75 ease-out\"\n                leaveFrom=\"opacity-100 scale-y-100\"\n                leaveTo=\"opacity-0 scale-y-90\"\n              >\n                <Disclosure.Panel static>\n                  <p className=\"mt-2 text-justify\">\n                    This is an agent based simulation based on{\" \"}\n                    <a\n                      className=\"font-bold\"\n                      href=\"http://ccl.northwestern.edu/netlogo/models/Segregation\"\n                      target=\"_black\"\n                      rel=\"noopener\"\n                    >\n                      Wilensky, U. (1997). NetLogo Segregation model\n                    </a>\n                    . Here we have two types of agents, each agent wants to live\n                    near some agents of the same type (controlled by \"Similarity\n                    wanted\"). At each tick the agents will move if they are not\n                    happy based on the similarity wanted.\n                  </p>\n                </Disclosure.Panel>\n              </Transition>\n            </>\n          )}\n        </Disclosure>\n        <Controls className=\"mt-4\" />\n        <Plots className=\"mt-4\" />\n      </div>\n    </div>\n  );\n};\n","import React from \"react\";\nimport { BaseCanvas } from \"./components/BaseCanvas\";\nimport { Description } from \"./components/Description\";\n\nexport const App = () => {\n  return (\n    <div className=\"min-h-screen p-2\">\n      <div className=\"flex h-full\">\n        <Description className=\"w-1/3 bg-gray-200 rounded-lg\" />\n        <BaseCanvas className=\"ml-2 flex-1 miin-h-screen bg-gray-900\" />\n      </div>\n    </div>\n  );\n};\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport { App } from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import * as wasm from './engine_wasm_bg.wasm';\n\nconst lTextDecoder = typeof TextDecoder === 'undefined' ? (0, module.require)('util').TextDecoder : TextDecoder;\n\nlet cachedTextDecoder = new lTextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n\ncachedTextDecoder.decode();\n\nlet cachegetUint8Memory0 = null;\nfunction getUint8Memory0() {\n    if (cachegetUint8Memory0 === null || cachegetUint8Memory0.buffer !== wasm.memory.buffer) {\n        cachegetUint8Memory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachegetUint8Memory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n\nconst heap = new Array(32).fill(undefined);\n\nheap.push(undefined, null, true, false);\n\nlet heap_next = heap.length;\n\nfunction addHeapObject(obj) {\n    if (heap_next === heap.length) heap.push(heap.length + 1);\n    const idx = heap_next;\n    heap_next = heap[idx];\n\n    heap[idx] = obj;\n    return idx;\n}\n\nfunction getObject(idx) { return heap[idx]; }\n\nfunction dropObject(idx) {\n    if (idx < 36) return;\n    heap[idx] = heap_next;\n    heap_next = idx;\n}\n\nfunction takeObject(idx) {\n    const ret = getObject(idx);\n    dropObject(idx);\n    return ret;\n}\n\nfunction handleError(f) {\n    return function () {\n        try {\n            return f.apply(this, arguments);\n\n        } catch (e) {\n            wasm.__wbindgen_exn_store(addHeapObject(e));\n        }\n    };\n}\n\nfunction getArrayU8FromWasm0(ptr, len) {\n    return getUint8Memory0().subarray(ptr / 1, ptr / 1 + len);\n}\n/**\n*/\nexport class SegregationEngine {\n\n    static __wrap(ptr) {\n        const obj = Object.create(SegregationEngine.prototype);\n        obj.ptr = ptr;\n\n        return obj;\n    }\n\n    __destroy_into_raw() {\n        const ptr = this.ptr;\n        this.ptr = 0;\n\n        return ptr;\n    }\n\n    free() {\n        const ptr = this.__destroy_into_raw();\n        wasm.__wbg_segregationengine_free(ptr);\n    }\n    /**\n    * @param {number} rows\n    * @param {number} cols\n    * @param {number} density\n    * @param {number} similarity\n    */\n    constructor(rows, cols, density, similarity) {\n        var ret = wasm.segregationengine_new(rows, cols, density, similarity);\n        return SegregationEngine.__wrap(ret);\n    }\n    /**\n    * @returns {number}\n    */\n    n_agents() {\n        var ret = wasm.segregationengine_n_agents(this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @returns {number}\n    */\n    n_unhappy() {\n        var ret = wasm.segregationengine_n_unhappy(this.ptr);\n        return ret >>> 0;\n    }\n    /**\n    * @returns {number}\n    */\n    get_similar_nearby_ratio() {\n        var ret = wasm.segregationengine_get_similar_nearby_ratio(this.ptr);\n        return ret;\n    }\n    /**\n    * @returns {TPositions}\n    */\n    get_positions() {\n        var ret = wasm.segregationengine_get_positions(this.ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @returns {TAgentType}\n    */\n    get_agent_types() {\n        var ret = wasm.segregationengine_get_agent_types(this.ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @returns {TStepReport}\n    */\n    step() {\n        var ret = wasm.segregationengine_step(this.ptr);\n        return takeObject(ret);\n    }\n    /**\n    * @param {number} similarity\n    */\n    set_similarity(similarity) {\n        wasm.segregationengine_set_similarity(this.ptr, similarity);\n    }\n}\n\nexport const __wbindgen_json_parse = function(arg0, arg1) {\n    var ret = JSON.parse(getStringFromWasm0(arg0, arg1));\n    return addHeapObject(ret);\n};\n\nexport const __wbg_getRandomValues_57e4008f45f0e105 = handleError(function(arg0, arg1) {\n    getObject(arg0).getRandomValues(getObject(arg1));\n});\n\nexport const __wbg_randomFillSync_d90848a552cbd666 = handleError(function(arg0, arg1, arg2) {\n    getObject(arg0).randomFillSync(getArrayU8FromWasm0(arg1, arg2));\n});\n\nexport const __wbg_self_f865985e662246aa = handleError(function() {\n    var ret = self.self;\n    return addHeapObject(ret);\n});\n\nexport const __wbindgen_object_drop_ref = function(arg0) {\n    takeObject(arg0);\n};\n\nexport const __wbg_static_accessor_MODULE_39947eb3fe77895f = function() {\n    var ret = module;\n    return addHeapObject(ret);\n};\n\nexport const __wbg_require_c59851dfa0dc7e78 = handleError(function(arg0, arg1, arg2) {\n    var ret = getObject(arg0).require(getStringFromWasm0(arg1, arg2));\n    return addHeapObject(ret);\n});\n\nexport const __wbg_crypto_bfb05100db79193b = function(arg0) {\n    var ret = getObject(arg0).crypto;\n    return addHeapObject(ret);\n};\n\nexport const __wbg_msCrypto_f6dddc6ae048b7e2 = function(arg0) {\n    var ret = getObject(arg0).msCrypto;\n    return addHeapObject(ret);\n};\n\nexport const __wbindgen_is_undefined = function(arg0) {\n    var ret = getObject(arg0) === undefined;\n    return ret;\n};\n\nexport const __wbg_buffer_ebc6c8e75510eae3 = function(arg0) {\n    var ret = getObject(arg0).buffer;\n    return addHeapObject(ret);\n};\n\nexport const __wbg_length_317f0dd77f7a6673 = function(arg0) {\n    var ret = getObject(arg0).length;\n    return ret;\n};\n\nexport const __wbg_new_135e963dedf67b22 = function(arg0) {\n    var ret = new Uint8Array(getObject(arg0));\n    return addHeapObject(ret);\n};\n\nexport const __wbg_set_4a5072a31008e0cb = function(arg0, arg1, arg2) {\n    getObject(arg0).set(getObject(arg1), arg2 >>> 0);\n};\n\nexport const __wbg_newwithlength_78dc302d31527318 = function(arg0) {\n    var ret = new Uint8Array(arg0 >>> 0);\n    return addHeapObject(ret);\n};\n\nexport const __wbg_subarray_34c228a45c72d146 = function(arg0, arg1, arg2) {\n    var ret = getObject(arg0).subarray(arg1 >>> 0, arg2 >>> 0);\n    return addHeapObject(ret);\n};\n\nexport const __wbindgen_throw = function(arg0, arg1) {\n    throw new Error(getStringFromWasm0(arg0, arg1));\n};\n\nexport const __wbindgen_memory = function() {\n    var ret = wasm.memory;\n    return addHeapObject(ret);\n};\n\n"],"sourceRoot":""}