(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[3],{1:function(e,t,n){"use strict";n.r(t);var i=n(2),a=n.n(i),r=n(32),o=n.n(r),s=(n(163),n(56)),c=n(54),l=n(357),u=n(356),d=n(96),p=n(27),b=n(355),h=n(4),m={Man1:"man1.gltf",Man2:"man2.gltf"},f={Man1:new p.MeshStandardMaterial({color:"#cc0000"}),Man2:new p.MeshStandardMaterial({color:"#00cc00"})},j=function(e){var t=e.modelType,n=e.isHappy,a=Object(d.a)(e,["modelType","isHappy"]),r=Object(i.useRef)(),o=Object(b.a)(m[t]).nodes,c=Object(i.useMemo)((function(){return n?null:f[t]}),[n,t]);return Object(h.jsxs)("group",Object(s.a)(Object(s.a)({ref:r},a),{},{dispose:null,castShadow:!0,children:[Object(h.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:o.Body1.geometry,material:null!==c&&void 0!==c?c:o.Body1.material}),Object(h.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:o.Head1.geometry,material:null!==c&&void 0!==c?c:o.Head1.material}),Object(h.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:o.ArmLeft1.geometry,material:null!==c&&void 0!==c?c:o.ArmLeft1.material}),Object(h.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:o.ArmRight1.geometry,material:null!==c&&void 0!==c?c:o.ArmRight1.material}),Object(h.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:o.LegLeft1.geometry,material:null!==c&&void 0!==c?c:o.LegLeft1.material}),Object(h.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:o.LegRight1.geometry,material:null!==c&&void 0!==c?c:o.LegRight1.material})]}))};b.a.preload(m.Man1),b.a.preload(m.Man2);var y,g=n(345),x=function(e){var t=e.boardSize,n=e.tileSize,i=e.margin;return Object(h.jsx)("mesh",{receiveShadow:!0,position:[0,-.01,0],rotation:[Math.PI/2,0,0],children:Array(t*t).fill(0).map((function(e,a){var r=a%t*n,o=Math.floor(a/t)*n;return Object(h.jsxs)("group",{children:[Object(h.jsx)(g.a,{receiveShadow:!0,args:[n-i,n-i],position:[r,o,0],children:Object(h.jsx)("meshBasicMaterial",{attach:"material",color:"#55565e",side:p.DoubleSide,opacity:.5})}),Object(h.jsx)(g.a,{receiveShadow:!0,args:[n-i,n-i],position:[r,o,0],children:Object(h.jsx)("shadowMaterial",{attach:"material",color:"#000",side:p.DoubleSide,opacity:.5})})]},a)}))})},v=n(106),O=n(8);!function(e){e[e.Empty=0]="Empty",e[e.Stopped=1]="Stopped",e[e.Running=2]="Running",e[e.Finished=3]="Finished"}(y||(y={}));var S=.2,w=20,N=5,k=4,_=25,D=15,z=.1,T=.99,F=.6,R=0,L=1,M=.75,A=Object(v.a)((function(e,t){return{nAgents:0,ticksPerSecond:N,setTicksPerSecond:function(t){var n=t<=w?+(S+t/w*(1-S)).toFixed(1):t-w;e({ticksPerSecond:n})},boardSize:D,setBoardSize:function(t){return e({boardSize:t})},density:F,setDensity:function(t){return e({density:t})},similarity:M,setSimilarity:function(t){return e((function(e){var n=e.engine;return void 0!==n&&n.set_similarity(t),{similarity:t}}))},positions:[],modelTypes:[],boardState:y.Empty,setupEngine:function(){e((function(e){var t=e.boardSize,n=e.density,i=e.similarity,a=new O.a(t,t,n,i),r=a.n_unhappy();return{engine:a,nAgents:a.n_agents(),positions:a.get_positions(),modelTypes:a.get_agent_types(),boardState:y.Stopped,nUnhappy:r,plotData:[{nUnhappy:r,similarNearbyRatio:a.get_similar_nearby_ratio()}]}}))},step:function(){var n=t().engine;if(void 0!==n){var i=n.step(),a=i.finished,r=i.similar_nearby_ratio,o=i.n_unhappy;e((function(e){var t=e.boardState,i=e.plotData;return{nUnhappy:o,positions:n.get_positions(),boardState:a?y.Finished:t,plotData:i.concat({nUnhappy:o,similarNearbyRatio:r})}}))}},toogleRun:function(){return e((function(e){var t=e.boardState;return{boardState:t===y.Stopped?y.Running:t===y.Running?y.Stopped:t}}))},nUnhappy:0,plotData:[]}})),P={tileSize:3,margin:.1},C=function(e){return{boardSize:e.boardSize,positions:e.positions,modelTypes:e.modelTypes,boardState:e.boardState,ticksPerSecond:e.ticksPerSecond,step:e.step}},B=function(){var e=A(C),t=e.boardSize,n=e.positions,a=e.modelTypes,r=e.boardState,o=e.ticksPerSecond,d=e.step,p=(t-1)*P.tileSize/2;return Object(c.b)((function(e){var t=e.clock;r===y.Running&&t.elapsedTime>1/o&&(d(),t.start())})),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(l.a,{makeDefault:!0,position:[10,40,70],fov:50,zoom:1}),Object(h.jsx)("ambientLight",{intensity:.2}),Object(h.jsx)("pointLight",{castShadow:!0,position:[5,30,35],intensity:.5}),Object(h.jsx)(i.Suspense,{fallback:null,children:Object(h.jsxs)("group",{position:[-p,0,-p],children:[Object(h.jsx)(x,Object(s.a)({boardSize:t},P)),n.map((function(e,t){var n=e.x,i=e.y,r=e.is_happy;return Object(h.jsx)(j,{scale:.25,modelType:a[t],position:[n*P.tileSize,0,i*P.tileSize],isHappy:r},t)}))]})}),Object(h.jsx)(u.a,{})]})},U=function(e){var t=e.className;return Object(h.jsx)("div",{className:t,children:Object(h.jsx)(c.a,{shadows:!0,children:Object(h.jsx)(B,{})})})},V=function(e){var t=e.title,n=e.showValue,i=e.className,a=e.min,r=void 0===a?1:a,o=e.max,s=void 0===o?100:o,c=e.step,l=void 0===c?1:c,u=e.defaultValue,d=void 0===u?50:u,p=e.onChange,b=void 0===p?function(){}:p;return Object(h.jsx)("div",{className:i,children:Object(h.jsxs)("div",{className:"group p-2 pb-3 flex flex-col bg-gray-400 bg-opacity-60 border-2 border-opacity-25 hover:border-opacity-30 border-gray-400 shadow rounded",children:[void 0!==t?Object(h.jsxs)("p",{className:"text-sm font-bold text-gray-700 group-hover:text-gray-900",children:[t," ",void 0!==n?Object(h.jsxs)("span",{className:"opacity-0 group-hover:opacity-100",children:["(",n,")"]}):null]}):null,Object(h.jsx)("input",{className:"mt-2.5 slider appearance-none outline-none w-full h-1.5 hover:bg-green-50 focus:ring ring-green-600 ring-opacity-50 rounded-full shadow-md",type:"range",min:r,max:s,step:l,defaultValue:d,onChange:function(e){var t=e.target;return b(+t.value)}})]})})},E=function(e){return{setupEngine:e.setupEngine,step:e.step,ticksPerSecond:e.ticksPerSecond,setTicksPerSecond:e.setTicksPerSecond,boardSize:e.boardSize,setBoardSize:e.setBoardSize,density:e.density,setDensity:e.setDensity,similarity:e.similarity,setSimilarity:e.setSimilarity,boardState:e.boardState,toogleRun:e.toogleRun}},H=function(e){var t=e.className,n=A(E),i=n.setupEngine,a=n.step,r=n.ticksPerSecond,o=n.setTicksPerSecond,s=n.boardSize,c=n.setBoardSize,l=n.density,u=n.setDensity,d=n.similarity,p=n.setSimilarity,b=n.boardState,m=n.toogleRun;return Object(h.jsxs)("div",{className:t,children:[Object(h.jsxs)("div",{className:"flex flex-wrap space-x-2 justify-between",children:[Object(h.jsx)("button",{className:"flex-1 btn",onClick:i,children:"Setup"}),Object(h.jsx)("button",{className:"flex-1 btn",onClick:a,disabled:b!==y.Stopped,children:"1-step"}),Object(h.jsx)("button",{className:"flex-1 btn ".concat(b===y.Running?"bg-green-600 hover:bg-red-700":""," ").concat(b===y.Finished?"disabled:opacity-100 disabled:bg-green-600":""),onClick:m,disabled:b===y.Empty||b===y.Finished,children:b===y.Finished?"Finished!":b===y.Running?"Stop":"Run"})]}),Object(h.jsxs)("div",{className:"mt-4 grid grid-cols-1 xl:grid-cols-2 gap-2",children:[Object(h.jsx)(V,{title:"Ticks per second",min:0,max:2*w,defaultValue:w+N,showValue:r,onChange:o}),Object(h.jsx)(V,{title:"Board size",min:k,max:_,defaultValue:s,showValue:s,onChange:c}),Object(h.jsx)(V,{title:"Density",min:z,max:T,step:.01,defaultValue:l,showValue:l,onChange:u}),Object(h.jsx)(V,{title:"Similarity wanted",min:R,max:L,step:.01,defaultValue:d,showValue:d,onChange:p})]})]})},q=n(346),I=n(347),J=n(339),W=n(352),G=n(333),K=n(35),Q=n(334),X=n(342),Y=function(e){var t=e.title,n=e.plotData,i=e.datakey,a=e.tooltipLabel,r=e.yAxisDecimals,o=e.className,s=e.children;return Object(h.jsx)("div",{className:o,children:Object(h.jsxs)("div",{className:"px-2 lg:px-4 pt-2 pb-2 lg:pb-4 bg-gray-400 bg-opacity-60 rounded ",children:[Object(h.jsx)("p",{className:"font-bold text-gray-700 text-center",children:t}),Object(h.jsx)(q.a,{className:"mt-1.5 bg-white w-full rounded",minHeight:150,children:Object(h.jsxs)(I.a,{data:n,margin:{top:10,right:10,bottom:5,left:5},children:[Object(h.jsx)(J.a,{dataKey:i,stroke:"#5e665e",strokeWidth:2,dot:!1}),Object(h.jsx)(W.a,{stroke:"#ccc",strokeWidth:.5}),Object(h.jsx)(G.a,{fontSize:11,height:35,tickSize:4,children:Object(h.jsx)(K.a,{value:"Time",position:"insideBottom",fontSize:12,offset:4})}),Object(h.jsx)(Q.a,{fontSize:11,width:20,tickSize:4,tickFormatter:function(e){return e.toFixed(r)}}),Object(h.jsx)(X.a,{content:Object(h.jsx)(Z,{tooltipLabel:a,valueDecimals:r})})]})}),s]})})},Z=function(e){var t=e.active,n=e.payload,i=e.label,a=e.tooltipLabel,r=e.valueDecimals;if(t&&n&&n.length){var o=n[0].value;return Object(h.jsxs)("div",{className:"px-2 py-1 text-sm font-bold bg-gray-700 text-white bg-opacity-75 rounded shadow",children:[Object(h.jsxs)("p",{children:["Time: ",i]}),Object(h.jsxs)("p",{children:[a,": ",o.toFixed(r)]})]})}return null},$=function(e){return{n_agents:e.nAgents,n_unhappy:e.nUnhappy,plotData:e.plotData}},ee=function(e){var t=e.className,n=A($),i=n.n_agents,a=n.n_unhappy,r=n.plotData,o=r.length>0?r[r.length-1]:void 0;return Object(h.jsx)("div",{className:t,children:Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)(Y,{title:"Global similarity",plotData:r,datakey:"similarNearbyRatio",tooltipLabel:"Similarity",yAxisDecimals:1,children:Object(h.jsxs)("div",{className:"flex flex-wrap justify-between mt-2 px-2 text-sm font-bold",children:[Object(h.jsxs)("p",{children:["Number of agents: ",i]}),void 0!==o?Object(h.jsxs)("p",{children:["Current similarity: ",o.similarNearbyRatio.toFixed(2)]}):null]})}),Object(h.jsx)(Y,{className:"mt-4",title:"Number-unhappy",plotData:r,datakey:"nUnhappy",tooltipLabel:"# Unhappy",yAxisDecimals:0,children:Object(h.jsxs)("div",{className:"flex flex-wrap justify-between mt-2 px-2 text-sm font-bold",children:[Object(h.jsxs)("p",{children:["Number of unhappy: ",a]}),Object(h.jsxs)("p",{children:["Unhappy / Total: ",(a/i).toFixed(2)]})]})})]})})},te=n(335),ne=n(336),ie=function(e){var t=e.className;return Object(h.jsx)("div",{className:t,children:Object(h.jsxs)("div",{className:"flex flex-col px-2 lg:px-4 py-3 lg:pt-4",children:[Object(h.jsx)("p",{className:"text-2xl xl:text-3xl font-bold",children:"Segregation Model"}),Object(h.jsx)(te.a,{as:"div",className:"mt-6 px-2 py-1 text-sm xl:text-base bg-gray-50 hover:bg-white rounded shadow",children:function(e){var t=e.open;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(te.a.Button,{className:"w-full flex justify-between items-center focus:outline-none",children:[Object(h.jsx)("span",{className:"pl-1 font-medium",children:"Description"}),Object(h.jsx)(ne.a,{className:"".concat(t?"transform rotate-180":""," w-5 h-5 text-gray-900")})]}),Object(h.jsx)(te.b,{show:t,enter:"transform origin-top transition duration-100 ease-out",enterFrom:"opacity-0 scale-y-90",enterTo:"opacity-100 scale-y-100",leave:"transform origin-top transition duration-75 ease-out",leaveFrom:"opacity-100 scale-y-100",leaveTo:"opacity-0 scale-y-90",children:Object(h.jsx)(te.a.Panel,{static:!0,children:Object(h.jsxs)("p",{className:"mt-2 text-justify",children:["This is an agent based simulation based on"," ",Object(h.jsx)("a",{className:"font-bold",href:"http://ccl.northwestern.edu/netlogo/models/Segregation",target:"_black",rel:"noopener",children:"Wilensky, U. (1997). NetLogo Segregation model"}),'. Here we have two types of agents, each agent wants to live near some agents of the same type (controlled by "Similarity wanted"). At each tick the agents will move if they are not happy based on the similarity wanted.']})})})]})}}),Object(h.jsx)(H,{className:"mt-4"}),Object(h.jsx)(ee,{className:"mt-4"})]})})},ae=function(){return Object(h.jsx)("div",{className:"min-h-screen p-2",children:Object(h.jsxs)("div",{className:"flex h-full",children:[Object(h.jsx)(ie,{className:"w-1/3 bg-gray-200 rounded-lg"}),Object(h.jsx)(U,{className:"ml-2 flex-1 miin-h-screen bg-gray-900"})]})})},re=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,353)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),i(e),a(e),r(e),o(e)}))};o.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(ae,{})}),document.getElementById("root")),re()},163:function(e,t,n){},174:function(e,t,n){"use strict";var i=n.w[e.i];e.exports=i;n(8);i.l()},8:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return f})),n.d(t,"p",(function(){return j})),n.d(t,"d",(function(){return y})),n.d(t,"i",(function(){return g})),n.d(t,"k",(function(){return x})),n.d(t,"r",(function(){return v})),n.d(t,"m",(function(){return O})),n.d(t,"j",(function(){return S})),n.d(t,"c",(function(){return w})),n.d(t,"f",(function(){return N})),n.d(t,"o",(function(){return k})),n.d(t,"b",(function(){return _})),n.d(t,"e",(function(){return D})),n.d(t,"g",(function(){return z})),n.d(t,"l",(function(){return T})),n.d(t,"h",(function(){return F})),n.d(t,"n",(function(){return R})),n.d(t,"s",(function(){return L})),n.d(t,"q",(function(){return M}));var i=n(40),a=n(104),r=n(174),o=new("undefined"===typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});o.decode();var s=null;function c(){return null!==s&&s.buffer===r.c.buffer||(s=new Uint8Array(r.c.buffer)),s}function l(e,t){return o.decode(c().subarray(e,e+t))}var u=new Array(32).fill(void 0);u.push(void 0,null,!0,!1);var d=u.length;function p(e){d===u.length&&u.push(u.length+1);var t=d;return d=u[t],u[t]=e,t}function b(e){return u[e]}function h(e){var t=b(e);return function(e){e<36||(u[e]=d,d=e)}(e),t}function m(e){return function(){try{return e.apply(this,arguments)}catch(t){r.b(p(t))}}}var f=function(){function e(t,n,a,o){Object(i.a)(this,e);var s=r.i(t,n,a,o);return e.__wrap(s)}return Object(a.a)(e,[{key:"__destroy_into_raw",value:function(){var e=this.ptr;return this.ptr=0,e}},{key:"free",value:function(){var e=this.__destroy_into_raw();r.a(e)}},{key:"n_agents",value:function(){return r.g(this.ptr)>>>0}},{key:"n_unhappy",value:function(){return r.h(this.ptr)>>>0}},{key:"get_similar_nearby_ratio",value:function(){return r.f(this.ptr)}},{key:"get_positions",value:function(){return h(r.e(this.ptr))}},{key:"get_agent_types",value:function(){return h(r.d(this.ptr))}},{key:"step",value:function(){return h(r.k(this.ptr))}},{key:"set_similarity",value:function(e){r.j(this.ptr,e)}}],[{key:"__wrap",value:function(t){var n=Object.create(e.prototype);return n.ptr=t,n}}]),e}(),j=function(e,t){return p(JSON.parse(l(e,t)))},y=m((function(e,t){b(e).getRandomValues(b(t))})),g=m((function(e,t,n){var i,a;b(e).randomFillSync((i=t,a=n,c().subarray(i/1,i/1+a)))})),x=m((function(){return p(self.self)})),v=function(e){h(e)},O=function(){return p(e)},S=m((function(e,t,n){return p(b(e).require(l(t,n)))})),w=function(e){return p(b(e).crypto)},N=function(e){return p(b(e).msCrypto)},k=function(e){return void 0===b(e)},_=function(e){return p(b(e).buffer)},D=function(e){return b(e).length},z=function(e){return p(new Uint8Array(b(e)))},T=function(e,t,n){b(e).set(b(t),n>>>0)},F=function(e){return p(new Uint8Array(e>>>0))},R=function(e,t,n){return p(b(e).subarray(t>>>0,n>>>0))},L=function(e,t){throw new Error(l(e,t))},M=function(){return p(r.c)}}).call(this,n(173)(e))}}]);
//# sourceMappingURL=3.62a89cd4.chunk.js.map